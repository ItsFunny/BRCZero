#!/bin/bash

KEY="captain"
CHAINID="brczero-67"
MONIKER="brczero"
CURDIR=`dirname $0`
HOME_SERVER=$CURDIR/"_cache_evm"

set -e
set -o errexit
set -a
set -m


killbyname() {
  NAME=$1
  ps -ef|grep "$NAME"|grep -v grep |awk '{print "kill -9 "$2", "$8}'
  ps -ef|grep "$NAME"|grep -v grep |awk '{print "kill -9 "$2}' | sh
  echo "All <$NAME> killed!"
}


run() {
    LOG_LEVEL=main:info,iavl:info,*:error,state:info,provider:info
#--mempool.enable_delete_min_gp_tx false \
#    brczerod start --pruning=nothing --rpc.unsafe \
    nohup brczerod start --rpc.unsafe \
      --local-rpc-port 26657 \
      --log_level $LOG_LEVEL \
      --log_file json \
      --dynamic-gp-mode=2 \
      --consensus.timeout_commit 4000ms \
      --consensus.create_empty_blocks=false \
      --tree-enable-async-commit=false \
      --enable-gid \
      --fast-query=false \
      --append-pid=true \
      --iavl-output-modules evm=0,acc=0 \
      --commit-gap-height 3 \
      --trie.dirty-disabled=true \
      --trace --home $HOME_SERVER --chain-id $CHAINID \
      --elapsed Round=1,CommitRound=1,Produce=1 \
      --rest.laddr "tcp://localhost:8545" > brc10.txt 2>&1 &

# --iavl-commit-interval-height \
# --iavl-enable-async-commit \
#      --iavl-cache-size int                              Max size of iavl cache (default 1000000)
#      --iavl-commit-interval-height int                  Max interval to commit node cache into leveldb (default 100)
#      --iavl-debug int                                   Enable iavl project debug
#      --iavl-enable-async-commit                         Enable async commit
#      --iavl-enable-pruning-history-state                Enable pruning history state
#      --iavl-height-orphans-cache-size int               Max orphan version to cache in memory (default 8)
#      --iavl-max-committed-height-num int                Max committed version to cache in memory (default 8)
#      --iavl-min-commit-item-count int                   Min nodes num to triggle node cache commit (default 500000)
#      --iavl-output-modules

}


killbyname brczerod
killbyname brczerocli

set -x # activate debugging

# run

# remove existing daemon and client
rm -rf ~/.brczero*
rm -rf $HOME_SERVER

(cd .. && make install)

# Set up config for CLI
brczerocli config chain-id $CHAINID
brczerocli config output json
brczerocli config indent true
brczerocli config trust-node true
brczerocli config keyring-backend test

# if $KEY exists it should be deleted
#
#    "eth_address": "0xbbE4733d85bc2b90682147779DA49caB38C0aA1F",
#     prikey: 8ff3ca2d9985c3a52b459e2f6e7822b23e1af845961e22128d5f372fb9aa5f17
brczerocli keys add --recover captain -m "puzzle glide follow cruel say burst deliver wild tragic galaxy lumber offer" -y

#    "eth_address": "0x83D83497431C2D3FEab296a9fba4e5FaDD2f7eD0",
brczerocli keys add --recover admin16 -m "palace cube bitter light woman side pave cereal donor bronze twice work" -y

brczerocli keys add --recover admin17 -m "antique onion adult slot sad dizzy sure among cement demise submit scare" -y

brczerocli keys add --recover admin18 -m "lazy cause kite fence gravity regret visa fuel tone clerk motor rent" -y

# Set moniker and chain-id for Ethermint (Moniker can be anything, chain-id must be an integer)
brczerod init $MONIKER --chain-id $CHAINID --home $HOME_SERVER

# Change parameter token denominations to brc10
cat $HOME_SERVER/config/genesis.json | jq '.app_state["staking"]["params"]["bond_denom"]="brc10"' > $HOME_SERVER/config/tmp_genesis.json && mv $HOME_SERVER/config/tmp_genesis.json $HOME_SERVER/config/genesis.json
cat $HOME_SERVER/config/genesis.json | jq '.app_state["crisis"]["constant_fee"]["denom"]="brc10"' > $HOME_SERVER/config/tmp_genesis.json && mv $HOME_SERVER/config/tmp_genesis.json $HOME_SERVER/config/genesis.json
cat $HOME_SERVER/config/genesis.json | jq '.app_state["gov"]["deposit_params"]["min_deposit"][0]["denom"]="brc10"' > $HOME_SERVER/config/tmp_genesis.json && mv $HOME_SERVER/config/tmp_genesis.json $HOME_SERVER/config/genesis.json
cat $HOME_SERVER/config/genesis.json | jq '.app_state["mint"]["params"]["mint_denom"]="brc10"' > $HOME_SERVER/config/tmp_genesis.json && mv $HOME_SERVER/config/tmp_genesis.json $HOME_SERVER/config/genesis.json

# Enable EVM

if [ "$(uname -s)" == "Darwin" ]; then
    sed -i "" 's/"enable_call": false/"enable_call": true/' $HOME_SERVER/config/genesis.json
    sed -i "" 's/"enable_create": false/"enable_create": true/' $HOME_SERVER/config/genesis.json
    sed -i "" 's/"enable_contract_blocked_list": false/"enable_contract_blocked_list": true/' $HOME_SERVER/config/genesis.json
else
    sed -i 's/"enable_call": false/"enable_call": true/' $HOME_SERVER/config/genesis.json
    sed -i 's/"enable_create": false/"enable_create": true/' $HOME_SERVER/config/genesis.json
    sed -i 's/"enable_contract_blocked_list": false/"enable_contract_blocked_list": true/' $HOME_SERVER/config/genesis.json
fi

# Allocate genesis accounts (cosmos formatted addresses)
brczerod add-genesis-account $(brczerocli keys show $KEY    -a) 100000000brc10 --home $HOME_SERVER
brczerod add-genesis-account $(brczerocli keys show admin16 -a) 900000000brc10 --home $HOME_SERVER
brczerod add-genesis-account $(brczerocli keys show admin17 -a) 900000000brc10 --home $HOME_SERVER
brczerod add-genesis-account $(brczerocli keys show admin18 -a) 900000000brc10 --home $HOME_SERVER

# Sign genesis transaction
brczerod gentx --name $KEY --keyring-backend test --home $HOME_SERVER

brczerod geninscription \
  --inscription "{\"d\":\"0x6080604052341561000f57600080fd5b60008054336001600160a01b031982168117835590916001600160a01b038316907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0906080a3506167fe80610066608039806080f3fe60406080815260043610620003ee576000803560e01c63017ae8ee8114620001175763088946d481146200014a5763360b5d8e81146200016b5763447c638081146200016b576358648cdf81146200018c576367ecf69b8114620001ad57636ac3d07b8114620001d75763705bff658114620002175763715018a6811462000246576385410acd81146200026b57638da5cb5b81146200028c57639234b7338114620002ba5763cb60a0a281146200026b5763cde3608e8114620002e95763d57dc25381146200031d5763d836fd0381146200033f5763ded3384c81146200014a5763e7ab22e081146200016b5763e8d5e69a81146200036e5763f2fde38b8114620003975763f719f6aa8114620003b757620003eb565b341562000122578182fd5b620001376200013136620005bb565b6200136d565b8351806200014683836200065f565b0381f35b341562000155578182fd5b6200016036620006ee565b825160058152602081f35b341562000176578182fd5b6200018136620006ee565b825160048152602081f35b341562000197578182fd5b620001a236620006ee565b825160128152602081f35b3415620001b8578182fd5b620001c336620006ee565b620001cd62001b68565b8351818152602081f35b3415620001e2578182fd5b620001ed3662000719565b620001f9818362001155565b87518381526020810183905260408101829052909450909250606081f35b341562000222578182fd5b62000237620002313662000784565b620008cc565b83518062000146838362000904565b341562000251578182fd5b6200025c36620006ee565b6200026662000d3d565b818351f35b341562000276578182fd5b6200028136620006ee565b825160068152602081f35b341562000297578182fd5b620002a236620006ee565b815483516001600160a01b0390911680825290602081f35b3415620002c5578182fd5b620002da620002d436620005bb565b6200159b565b83518062000146838362000975565b3415620002f4578182fd5b620002ff36620006ee565b8251736a8f2cb862290b70fe2a3e774487f2623a3e61188152602081f35b341562000328578182fd5b6200033336620006ee565b82516110008152602081f35b34156200034a578182fd5b6200035536620006ee565b6200035f6200183d565b8351806200014683836200098a565b341562000379578182fd5b620003843662000a51565b62000390818362000f5f565b5050818351f35b3415620003a2578182fd5b62000266620003b13662000c93565b62000dd9565b3415620003c2578182fd5b620003cd3662000cc1565b620003d9818362001ceb565b91505083518062000146838362000ce4565b50505b50600080fd5b634e487b7160e01b600052604160045260246000fd5b602081016001600160401b03811182821017156200042c576200042c620003f4565b60405250565b604081016001600160401b03811182821017156200042c576200042c620003f4565b601f8201601f191681016001600160401b03811182821017156200047c576200047c620003f4565b6040525050565b6040516101a081016001600160401b0381118282101715620004a957620004a9620003f4565b60405290565b604051608081016001600160401b0381118282101715620004a957620004a9620003f4565b60405160c081016001600160401b0381118282101715620004a957620004a9620003f4565b60405160a081016001600160401b0381118282101715620004a957620004a9620003f4565b6040516200052c8162000432565b90565b60006001600160401b038211156200054b576200054b620003f4565b50601f01601f191660200190565b600082601f8301126200056b57600080fd5b813562000578816200052f565b60405162000587828262000454565b8281528560208487010111156200059d57600080fd5b82602086016020830137600092810160200192909252509392505050565b6000602060031983011215620005d057600080fd5b6004356001600160401b03811115620005e857600080fd5b620005f7838260040162000559565b9392505050565b60005b838110156200061b57818101518382015260200162000601565b838111156200062b576000848401525b50505050565b600081518084526200064b816020860160208601620005fe565b601f01601f19169290920160200192915050565b60006020808301818452808551808352604092508286019150828160051b87010184880160005b83811015620006e057888303603f19018552815180516080808652620006af8187018362000631565b838b0151878c0152898401518a88015260609384015193909601929092525050938601939086019060010162000686565b509098975050505050505050565b6000600319820112156200070157600080fd5b50565b600081830312156200071557600080fd5b5050565b6000806040600319840112156200072f57600080fd5b6004356001600160401b03808211156200074857600080fd5b62000757858360040162000559565b93506024359150808211156200076c57600080fd5b506200077c848260040162000559565b915050915091565b60006020600319830112156200079957600080fd5b505060043590565b634e487b7160e01b600052603260045260246000fd5b6000806001548310620007ce57620007ce620007a1565b5050600160009081526000805160206200679b83398151915290910191565b634e487b7160e01b600052600060045260246000fd5b600181811c908216806200081857607f821691505b602082108114156200083a57634e487b7160e01b600052602260045260246000fd5b50919050565b6040518154600090620008538162000803565b808452600182811680156200087157600181146200088757620008ba565b60ff1984166020870152604086019450620008ba565b8660005260208060002060005b85811015620008b157815489820184015290840190820162000894565b88019091019550505b505050506200083a8282038362000454565b60006001548210620008dd57600080fd5b6001600052620008fe6000805160206200679b833981519152830162000840565b92915050565b602081526000620005f7602083018462000631565b6000815160c084526200093060c085018262000631565b6020848101516001600160a01b03169086015260408085015190860152606080850151908601526080808501519086015260a093840151949093019390935250919050565b602081526000620005f7602083018462000919565b6000602080830181845280855180835260408601915060408160051b870101925083870160005b82811015620009e357603f19888603018452620009d085835162000919565b94509285019290850190600101620009b1565b5092979650505050505050565b8035600781900b811462000a0357600080fd5b919050565b80151581146200070157600080fd5b803562000a038162000a08565b803563ffffffff8116811462000a0357600080fd5b80356001600160401b038116811462000a0357600080fd5b6000806003196040848201121562000a6857600080fd5b600480356001600160401b038082111562000a8257600080fd5b6101a08483890301121562000a9657600080fd5b62000aa062000483565b9350818301358181111562000ab457600080fd5b62000ac488858386010162000559565b85525062000ad560248301620009f0565b602085015262000ae86044830162000a17565b604085015260648201358181111562000b0057600080fd5b62000b1088858386010162000559565b60608601525060848201358181111562000b2957600080fd5b62000b3988858386010162000559565b60808601525060a48201358181111562000b5257600080fd5b62000b6288858386010162000559565b60a08601525060c48201358181111562000b7b57600080fd5b62000b8b88858386010162000559565b60c08601525060e48201358181111562000ba457600080fd5b62000bb488858386010162000559565b60e0860152506101048201358181111562000bce57600080fd5b62000bde88858386010162000559565b610100860152506101248201358181111562000bf957600080fd5b62000c0988858386010162000559565b610120860152506101448201358181111562000c2457600080fd5b62000c3488858386010162000559565b6101408601525062000c4a610164830162000a24565b61016085015262000c5f610184830162000a39565b610180850152929450602435928084111562000c7a57600080fd5b505062000c8a8583830162000559565b92505050915091565b600060206003198301121562000ca857600080fd5b6004356001600160a01b0381168114620008fe57600080fd5b60008060406003198401121562000cd757600080fd5b5050600435916024359150565b6000602080830181845280855180835260408601915060408160051b870101925083870160005b82811015620009e357603f1988860301845262000d2a85835162000631565b9450928501929085019060010162000d0b565b62000d4762000d80565b600080546001600160a01b0319811682556040519091906001600160a01b038316906000805160206200677b833981519152908390a350565b6000546001600160a01b0316338114620007015760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606481fd5b62000de362000d80565b6001600160a01b038181168062000e485760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b6064820152608481fd5b6000548160018060a01b0319821617600055838382166000805160206200677b8339815191526000604051a350505050565b600060405162000e8a8162000432565b60048152631137b81160e11b6020820152919050565b80620007015760405162461bcd60e51b81526020600482015260136024820152721bdc195c985d1a5bdb881d5b9919599a5b9959606a1b6044820152606481fd5b600060405162000ef18162000432565b6008815267113232b83637bc9160c11b6020820152919050565b600060405162000f1b8162000432565b60068152651136b4b73a1160d11b6020820152919050565b600060405162000f438162000432565b600a815269113a3930b739b332b91160b11b6020820152919050565b62000f6a8262003366565b62000f9d62000f9762000f9362000f8b62000f8462000e7a565b85620033ef565b516007161590565b1590565b62000ea0565b62000fbc62000fb662000faf62000e7a565b83620033ef565b62003ff9565b62000fde62000fca62000ee1565b828151602092830120815191909201201490565b801562000ff75762000ff18385620020bc565b620010b3565b6200100962000fb662000f8462000e7a565b6200101762000fca62000f0b565b801562001030576200102a8587620023e1565b620010b0565b6200104962000fb66200104262000e7a565b87620033ef565b6200105762000fca62000f33565b801562001070576200106a8789620025bc565b620010ad565b60405162461bcd60e51b815260206004820152601160248201527034b63632b3b0b61037b832b930ba34b7b760791b6044820152606481fd5b0381fd5b50505b50505b5050505050565b60006040518251620010d1818360208701620005fe565b6002908201908152819003602001902092915050565b546001600160a01b031690565b600080604083850312156200110857600080fd5b505080516020909101519092909150565b6040513d6000823e3d81fd5b634e487b7160e01b600052601160045260246000fd5b60008282101562001150576200115062001125565b500390565b60008060006200116585620032b6565b6001600160a01b036200117882620010ba565b5416620011bc5760405162461bcd60e51b8152602060048201526015602482015274109490cc8c081a5cc81b9bdd0819195c1b1bde5959605a1b6044820152606481fd5b620011e1620011d5620011cf83620010ba565b620010e7565b6001600160a01b031690565b9050803b620011ef57600080fd5b604080516335ee5f8760e01b81529081806200120f896004830162000904565b0383855afa91508162001226576200122662001119565b600080831562001250576200123c3d8462000454565b6200124a3d840184620010f4565b90925090505b6200125c81836200113b565b9199909850909650945050505050565b60006001600160401b03821115620012885762001288620003f4565b5060051b60200190565b60006200129f826200126c565b60408051620012af838262000454565b848152925082601f19620012c3866200126c565b0192506000805b8481101562001322578351608081016001600160401b0381118282101715620012f757620012f7620003f4565b85526060808252602080830185905282870185905290820184905284830181019190915201620012ca565b5050505050919050565b600060001982141562001343576200134362001125565b5060010190565b6000815183106200135f576200135f620007a1565b5060059190911b0160200190565b60006001546200137d8162001292565b60005b8281101562001408576200139481620007b7565b50620013a08162000840565b9050620013ae818762001155565b8215620013f157620013bf620004af565b84815283602082015282604082015281606082015280620013e187896200134a565b5250620013ef85876200134a565b505b5050505062001400816200132c565b905062001380565b50620014148262001292565b6000805b84811015620014805760206200142f82866200134a565b510151156200146d576200144481856200134a565b516200145183856200134a565b526200145e82846200134a565b506200146a826200132c565b91505b62001478816200132c565b905062001418565b508152949350505050565b60405160009060c081016001600160401b0381118282101715620014b357620014b3620003f4565b80604052508091506060815260006020820152600060408201526000606082015260006080820152600060a08201525090565b600060208284031215620014f957600080fd5b81516001600160401b038111156200151057600080fd5b8201601f810184136200152257600080fd5b80516200152f816200052f565b6040516200153e828262000454565b8281528660208486010111156200155457600080fd5b62001567836020830160208701620005fe565b9695505050505050565b6000602082840312156200158457600080fd5b5051919050565b6001600160a01b03919091169052565b6000620015a76200148b565b9050620015c6620011d5620011cf620015c085620032b6565b620010ba565b6001600160a01b038116156200083a57803b620015e257600080fd5b60408051633eaf5d9f60e01b815260008082600481875afa806200160a576200160a62001119565b81811562001633573d83853e620016223d8562000454565b620016303d850185620014e6565b90505b853b6200163e578283fd5b845163d5abeb0160e01b81529350602084600481895afa91508162001667576200166762001119565b8282156200168c576200167b3d8662000454565b620016893d86018662001571565b90505b863b62001697578384fd5b8551637e66f15f60e01b815294506020856004818a5afa925082620016c057620016c062001119565b838315620016e557620016d43d8762000454565b620016e23d87018762001571565b90505b873b620016f0578485fd5b865163313ce56760e01b815295506020866004818b5afa93508362001719576200171962001119565b8484156200173e576200172d3d8862000454565b6200173b3d88018862001571565b90505b883b62001749578586fd5b87516339464bdd60e11b815296506020876004818c5afa94508462001772576200177262001119565b84156200179657620017853d8862000454565b620017933d88018862001571565b95505b620017a0620004d4565b9650838752620017b489602089016200158b565b9686019190915260608501525050608082019290925260a08101919091529392505050565b6000620017e6826200126c565b604051620017f5828262000454565b838152915081601f1962001809856200126c565b01915060005b828110156200183557620018226200148b565b602082840101526020810190506200180f565b505050919050565b60006001546200184d81620017d9565b60005b8281101562001ab7576200186481620007b7565b5062001886620011d5620011cf620015c0620018808562000840565b620032b6565b9050803b6200189457600080fd5b60408051633eaf5d9f60e01b815260046000828281875afa80620018bc57620018bc62001119565b60008115620018e6573d81853e620018d53d8562000454565b620018e33d850185620014e6565b90505b853b620018f257600080fd5b845163d5abeb0160e01b815293506020915081848481895afa806200191b576200191b62001119565b600081156200194157620019303d8762000454565b6200193e3d87018762001571565b90505b873b6200194d57600080fd5b8651637e66f15f60e01b81529550838686818b5afa91508162001974576200197462001119565b600082156200199a57620019893d8862000454565b620019973d88018862001571565b90505b883b620019a657600080fd5b875163313ce56760e01b81529650848787818c5afa925082620019cd57620019cd62001119565b60008315620019f357620019e23d8962000454565b620019f03d89018962001571565b90505b893b620019ff57600080fd5b88516339464bdd60e11b81529750858888818d5afa96508662001a265762001a2662001119565b60009350861562001a4e5762001a3d3d8962000454565b62001a4b3d89018962001571565b93505b62001a58620004d4565b975084885262001a6b8a878a016200158b565b878901929092526060870152608086015260a08501525082915062001a93905085876200134a565b5250505062001aa381836200134a565b5062001aaf816200132c565b905062001850565b5062001ac382620017d9565b6000805b8481101562001b435762001af5620011d5602062001ae684886200134a565b5101516001600160a01b031690565b1562001b305762001b0781856200134a565b5162001b1483856200134a565b5262001b2182846200134a565b5062001b2d826200132c565b91505b62001b3b816200132c565b905062001ac7565b5081529392505050565b6000821982111562001b635762001b6362001125565b500190565b60008060018054825b8181101562001c905762001b8581620007b7565b506040805186835462001b988162000803565b818916801562001bb1576001811462001bc35762001bf1565b60ff1983168552818501935062001bf1565b868b526020808c208c5b8481101562001be857815488820152908c0190820162001bcd565b50505081850193505b505050600281526020935062001c11620011d585848403018420620010e7565b915050803b62001c1f578687fd5b9051632a1f650b60e21b8152908282600481845afa9250508162001c475762001c4762001119565b85821562001c6c5762001c5b3d8362000454565b62001c693d83018362001571565b90505b62001c78818962001b4d565b975050505062001c88816200132c565b905062001b71565b5050505090565b600062001ca4826200126c565b60405162001cb3828262000454565b838152915081601f1962001cc7856200126c565b01915060005b82811015620018355760606020828401015260208101905062001ccd565b600082821062001d305760405162461bcd60e51b81526020600482015260136024820152721a5b1b1959d85b081a5b99195e081a5b9c1d5d606a1b6044820152606481fd5b8183101562001d435762001d4362001125565b81830362001d518162001c97565b60005b8281101562001dad5762001d7362001d6d828762001b4d565b620007b7565b5062001d7f8162000840565b62001d8b83856200134a565b525062001d9981836200134a565b5062001da5816200132c565b905062001d54565b50949350505050565b600081516101a080855262001dce8186018362000631565b915050602083015162001de6602086018260070b9052565b50604083015162001dfb604086018215159052565b506060830151848203606086015262001e15828262000631565b9150506080830151848203608086015262001e31828262000631565b91505060a083015184820360a086015262001e4d828262000631565b91505060c083015184820360c086015262001e69828262000631565b91505060e083015184820360e086015262001e85828262000631565b915050610100808401518583038287015262001ea2838262000631565b92505050610120808401518583038287015262001ec0838262000631565b92505050610140808401518583038287015262001ede838262000631565b925050506101608084015162001efb8287018263ffffffff169052565b5050610180928301516001600160401b03169390920192909252919050565b60a08152600062001f2f60a083018462001db6565b828103602084015262001f43818662000631565b9150508460408301528560608301528660808301529695505050505050565b601f82111562001fb057600081815260208120601f850160051c8101602086101562001f8b5750805b601f850160051c820191505b8181101562001fac5782815560010162001f97565b5050505b505050565b60018054600160401b811062001fcf5762001fcf620003f4565b818101825562001fdf81620007b7565b9150811562001ff25762001ff2620007ed565b835191506001600160401b03821115620020105762002010620003f4565b620020288262002021835462000803565b8362001f62565b602080601f8411600181146200205e5760008515620020475750868301515b600019600387901b1c191685871b178455620010b0565b600084815260208120601f198716915b828110156200208d57898601518255948401949088019084016200206e565b5086821015620020ac5788850151600019600389901b60f8161c191681555b505050505090821b909101905550565b620020c662002823565b50620020d2826200412c565b516000808160048410158015620020ea575060068411155b620020f58162002877565b506200211d6200211762000f9362000f8b62002110620028ce565b8a620033ef565b620028f5565b6200213d6200213762000f9362000f8b620021106200294c565b62002974565b6004841480156200216c5760129350620021616200215a620028ce565b8862002f41565b9250829150620022c7565b60058514801562002242576200219462000f9362000f8b6200218d620029cd565b8b620033ef565b8015620021cc5760129550620021b4620021ad620028ce565b8a62002f41565b9450620021c4620021ad620029cd565b93506200223b565b620021e962000f9362000f8b620021e2620029f4565b8c620033ef565b80156200221e57620021fb8a6200318a565b965062002213876200220c620028ce565b8c62003047565b955085945062002239565b60405162461bcd60e51b815280620010a96004820162002a1b565b505b50620022c5565b6006861415620022c5576200226262000f9362000f8b6200218d620029cd565b801562002282576200227f62000f9362000f8b620021e2620029f4565b90505b6200228d8162002a52565b5062002299886200318a565b9450620022b185620022aa620028ce565b8a62003047565b9350620022c285620022aa620029cd565b92505b505b50620022d38662003246565b94506001600160a01b03620022fd81620022f5620011d5620011cf8a620010ba565b161562002a73565b62002307620004f9565b828152866020820152846040820152836060820152856080820152604051965061256580880188811060018060401b03821117156200234a576200234a620003f4565b81620042168a398862002362878a8a898f8762001f1a565b03896000f098505050866200237b576200237b62001119565b620023b1828816620023916020840151620010ba565b80546001600160a01b0319166001600160a01b0392909216919091179055565b620010ad815162001fb5565b604081526000620023d2604083018462001db6565b90508360208301529392505050565b620023eb62002acc565b50620024056004620023fd846200412c565b511462002b06565b6200242c6200242662000f9362000f8b6200241f6200294c565b86620033ef565b62002b5c565b6200244c6200244662000f9362000f8b6200241f62002bb3565b62002bda565b620024578262003246565b6200247f6001600160a01b0362002476620011d5620011cf85620010ba565b16151562002c30565b62002492620011d5620011cf83620010ba565b9150813b620024a057600080fd5b60405163313ce56760e01b8152602081600481865afa925082620024c857620024c862001119565b60008315620024ee57620024dd3d8362000454565b620024eb3d83018362001571565b90505b6200250481620024fd62002bb3565b8862003047565b93505050620025126200051e565b8181526020018281526200252e620011d5620011cf84620010ba565b92508051915050813b6200254157600080fd5b604051630cb953c560e41b81526000818062002562858860048401620023bd565b03836000875af19250826200257b576200257b62001119565b8215620010b3576200258e3d8262000454565b620010b33d82018262000704565b600060208284031215620025af57600080fd5b8151620005f78162000a08565b620025c662002acc565b50620025d2826200412c565b5160048110158015620025e6575060068111155b620025f18162002c8a565b50620026126200260c62000f9362000f8b620010426200294c565b62002ce4565b620026326200262c62000f9362000f8b6200104262002bb3565b62002d3f565b6005811480156200268b576200265362000f9362000f8b6200104262002d99565b8062002679576200267662000f9362000f8b6200266f62002dbf565b88620033ef565b90505b620026848162002de6565b50620026d8565b6006821415620026d857620026ab62000f9362000f8b6200104262002d99565b8015620026cb57620026c862000f9362000f8b6200266f62002dbf565b90505b620026d68162002de6565b505b5050620026e58262003246565b6200270d6001600160a01b0362002704620011d5620011cf85620010ba565b16151562002e31565b62002720620011d5620011cf83620010ba565b9150813b6200272e57600080fd5b60405163313ce56760e01b8152602081600481865afa92508262002756576200275662001119565b600083156200277c576200276b3d8362000454565b620027793d83018362001571565b90505b6200278b81620024fd62002bb3565b93505050620027996200051e565b818152602001828152620027b5620011d5620011cf84620010ba565b92508051915050813b620027c857600080fd5b60405163f847412160e01b815260208180620027e9858860048401620023bd565b03836000875af192508262002802576200280262001119565b8215620010b357620028153d8262000454565b62001fac3d8201826200259c565b60405160009060a081016001600160401b03811182821017156200284b576200284b620003f4565b806040525080915060608152606060208201526000604082015260006060820152600060808201525090565b80620007015760405162461bcd60e51b8152602060048201526024808201527f6f7065726174696f6e206465706c6f79203a206974656d2053697a6520696c6c6044820152631959d85b60e21b6064820152608481fd5b6000604051620028de8162000432565b60058152641136b0bc1160d91b6020820152919050565b80620007015760405162461bcd60e51b8152602060048201526024808201527f6f7065726174696f6e206465706c6f79203a206d617820697320756e646566696044820152631b99195960e21b6064820152608481fd5b60006040516200295c8162000432565b6006815265113a34b1b59160d11b6020820152919050565b80620007015760405162461bcd60e51b815260206004820152602560248201527f6f7065726174696f6e206465706c6f79203a207469636b20697320756e6465666044820152641a5b99195960da1b6064820152608481fd5b6000604051620029dd8162000432565b6005815264113634b69160d91b6020820152919050565b600060405162002a048162000432565b6005815264113232b19160d91b6020820152919050565b6020808252601e908201527f6f7065726174696f6e206465706c6f79203a206b657920696c6c6567616c0000604082015260600190565b80620007015760405162461bcd60e51b815280620010a96004820162002a1b565b80620007015760405162461bcd60e51b815260206004820152602560248201527f6f7065726174696f6e206465706c6f79203a20425243323020686173206465706044820152641b1bde595960da1b6064820152608481fd5b6040805160009181016001600160401b038111828210171562002af35762002af3620003f4565b6040526060815260006020820152919050565b80620007015760405162461bcd60e51b815260206004820152602260248201527f6f7065726174696f6e206d696e74203a206974656d2053697a6520696c6c6567604482015261185b60f21b6064820152608481fd5b80620007015760405162461bcd60e51b815260206004820152602360248201527f6f7065726174696f6e206d696e74203a207469636b20697320756e646566696e60448201526219195960ea1b6064820152608481fd5b600060405162002bc38162000432565b60058152641130b6ba1160d91b6020820152919050565b80620007015760405162461bcd60e51b815260206004820152602260248201527f6f7065726174696f6e206d696e74203a20616d7420697320756e646566696e64604482015261195960f21b6064820152608481fd5b80620007015760405162461bcd60e51b815260206004820152602660248201527f6f7065726174696f6e206d696e74203a204252433230206973206e6f742064656044820152651c1b1bde595960d21b6064820152608481fd5b80620007015760405162461bcd60e51b815260206004820152602660248201527f6f7065726174696f6e207472616e73666572203a206974656d2053697a6520696044820152651b1b1959d85b60d21b6064820152608481fd5b80620007015760405162461bcd60e51b815260206004820152602760248201527f6f7065726174696f6e207472616e73666572203a207469636b20697320756e6460448201526619599a5b99195960ca1b6064820152608481fd5b80620007015760405162461bcd60e51b815260206004820152602660248201527f6f7065726174696f6e207472616e73666572203a20616d7420697320756e6465604482015265199a5b99195960d21b6064820152608481fd5b600060405162002da98162000432565b6004815263113a379160e11b6020820152919050565b600060405162002dcf8162000432565b6005815264113332b29160d91b6020820152919050565b80620007015760405162461bcd60e51b815260206004820181905260248201527f6f7065726174696f6e207472616e73666572203a206b657920696c6c6567616c6044820152606481fd5b80620007015760405162461bcd60e51b815260206004820152602a60248201527f6f7065726174696f6e207472616e73666572203a204252433230206973206e6f6044820152691d0819195c1b1bde595960b21b6064820152608481fd5b6000604d82111562002ea55762002ea562001125565b50600a0a90565b60006001600160401b01600160801b01600160c01b0182116001161562002ed75762002ed762001125565b506001600160401b030290565b80620007015760405162461bcd60e51b815260206004820152602960248201527f6465636f64654e756d626572416e64466f726d616c697a65203a20696c6c656760448201526830b610373ab6b132b960b91b6064820152608481fd5b600062002f5d62002f5762000fb68585620033ef565b62003616565b60405160208101633088771f60e11b81526040602483015262002f84606483018462000631565b60126044840152829003601f1981018352925062002fa3838362000454565b6000808351836110005afa9250505062002fbc62003274565b8162002ffc5760405162461bcd60e51b8152602060048201526012602482015271185d1bda55da5d1a111958c819985a5b195960721b6044820152606481fd5b62003011602082518301016020830162001571565b91505080151580156200303457506f0de0b6b3a763fffff21f494c589c00008111155b6200303f8162002ee4565b509392505050565b60006200305d62002f5762000fb68585620033ef565b60405160208101633088771f60e11b81526040602483015262003084606483018462000631565b92508660448301528183039250601f1983018252620030a4838362000454565b6000808351836110005afa92505050620030bd62003274565b81620030fd5760405162461bcd60e51b8152602060048201526012602482015271185d1bda55da5d1a111958c819985a5b195960721b6044820152606481fd5b62003112602082518301016020830162001571565b91505080151580156200313a57620031346200312e8762002e8f565b62002eac565b82111590505b62001dad8162002ee4565b80620007015760405162461bcd60e51b81526020600482015260176024820152766465636f6465446563203a20696c6c6567616c2064656360481b6044820152606481fd5b6000620031a262002f5762000fb662000f84620029f4565b60008151815b838101600190810151600a850260ff909116818101602f19908101969287107f1999999999999999999999999999999999999999999999999999999999999999909311929092176009919092011117159290920291018181106200320c5762003212565b620031a8565b5080620032275763101827966000526004601cfd5b5060128111801592506200323b5780151591505b620005f78262003145565b6000806200325f62002f5762000fb66200241f6200294c565b6200326a81620032b6565b9094909350915050565b60003d8015620032ae573d6200328a816200052f565b60405162003299828262000454565b8281528094503d6000602083013e5050505090565b606091505090565b600060405160208101639416b42360e01b81526020602483015281620032e0604484018662000631565b03601f1981018352620032f4818462000454565b506000808351836110005afa9150506200330d62003274565b81620033495760405162461bcd60e51b815260206004820152600e60248201526d1d1bd31bddd95c8819985a5b195960921b6044820152606481fd5b6200335e6020825183010160208301620014e6565b949350505050565b600060405162003376816200040a565b6000808252816040528091506020840160208551860101808214620033cc578051831a6022825363ffffffff87113d3d3e601160f91b60d888901b178452620033c28284868a62003a47565b9095509250808253505b83158183101715620033e557631018279683526004601cfd5b5091949350505050565b6000604051620033ff816200040a565b600080825281604052606091508192506002600785511614156200348457845160208181880120915062003433866200412c565b805160051b5b80156200347f57818101518051601f19909201918790608016156200346657620034638262004093565b90505b85815186830120146200347b57505062003439565b5096505b505050505b505092915050565b63101827966000526004601cfd5b600080600480840191508482111584516000805b848114620035045782811a602f19808201667e0000007e03ff811c8716620034dc576310182796855287601cfd5b816030821160051b600760108411020184038b8a1b01019950505050600181019050620034ae565b50505050509250929050565b6000806200351f84846200349a565b81935080925061dbff821161d8008310176200356a576200354e615c75825160f01c148702600283016200349a565b80945050806103ff16620ffc0084600a1b160162010000019450505b50509250929050565b6000607f83116200358c578282535060018101620008fe565b82601f538260061c601e536107ff8311620035bd57600051611f3f1661c0801760f01b8252600282019050620008fe565b82600c1c601d5361ffff8311620035ec57600051620f3f3f1662e080801760e81b8252600382019050620008fe565b8260121c601c535060005163073f3f3f1663f08080801760e01b81526211000090911060021b0190565b60008151601f818401018051600081811a600287015161ff001617612222149150600182818611166200364d576200364d6200348c565b60206040510194506021870192505b8383146200372e57825192810192821a605c81146200369057602281146200368c5780865350938401936200365c565b8493505b508383146200372457825192810192821a67040000000000200160221b811c821615620036c55780865350938401936200365c565b6075811415620036f357620036db858562003510565b9450620036e9818862003573565b965050506200365c565b660a0000000d000964020000000360721b01605419919091011a8015620037225780865350938401936200365c565b505b6200372e6200348c565b508352505060408051808303601f190181526020909201905292915050565b805b6001640100002600825160001a1c166200376857919050565b6001016200374f565b63ffffffff82113d3d3e66ffffffff000000191660189190911b1790565b63ffffffff82113d3d3e63ffffffff60981b191660989190911b1790565b63ffffffff82113d3d3e63ffffffff60381b191660389190911b1790565b63ffffffff82113d3d3e63ffffffff60b81b191660b89190911b1790565b63ffffffff82113d3d3e63ffffffff60581b191660589190911b1790565b604051838503828503601f190163ffffffff8082113d3d3e8083113d3d3e50600160581b600160981b03199490941660589490941b63ffffffff60781b19169390931760789390931b929092176004178252506020810160405292915050565b604051838503828503601f190163ffffffff8082113d3d3e8083113d3d3e50600160581b600160981b03199490941660589490941b63ffffffff60781b19169390931760789390931b929092176005178252506020810160405292915050565b604051838503828503601f190163ffffffff8082113d3d3e8083113d3d3e50600160581b600160981b03199490941660589490941b63ffffffff60781b19169390931760789390931b929092176006178252506020810160405292915050565b604051838503828503601f190163ffffffff8082113d3d3e8083113d3d3e50600160581b600160981b03199490941660589490941b63ffffffff60781b19169390931760789390931b929092176001178252506020810160405292915050565b604051838503828503601f190163ffffffff8082113d3d3e8083113d3d3e50600160581b600160981b03199490941660589490941b63ffffffff60781b19169390931760789390931b929092176002178252506020810160405292915050565b604051838503828503601f190163ffffffff8082113d3d3e8083113d3d3e50600160581b600160981b03199490941660589490941b63ffffffff60781b19169390931760789390931b929092176003178252506020810160405292915050565b60008062003a588460005162003771565b62003a63866200374d565b915086821062003a74575062003bc3565b815160001a60228114605b8214607b83146001611ff9602d1b851c169350821562003abf578562003aa68c8862003e1a565b965062003ab68782888c62003807565b97505062003bb0565b811562003adf5762003ad48b87878b62003bcc565b909750955062003bb0565b801562003af45762003ad48b87878b62003cb2565b831562003b085762003ad486868a62003f3a565b60048087018c811162003b675787885160e01c637472756581141562003b455782995062003b3983838b8f62003867565b9a505050505062003bb0565b636e756c6c81141562003b64579883019862003b398a838b8f620038c7565b50505b5050600586018b811162003ba557866466616c7365885160d81c141562003ba35781975062003b998282898d62003867565b9850505062003bb0565b505b5062003bb06200348c565b505050505062003bc0816200374d565b90505b94509492505050565b600080600080600180880193505b801562003c865788841062003bf35762003bf36200348c565b8462003c195762003c04846200374d565b9350605d8451841a141562003c195762003c86565b62003c278985878962003a47565b819650809550811562003c765762003c448483516040176200378f565b8252805193830193851a605d81141562003c615750505062003c86565b602c81141562003c745750505062003c7c565b505b50508893505b9283019262003bda565b808401935050505062003ca7818662003ca08588620037ad565b8662003927565b915094509492505050565b60006001848101905b801562003dbe5786821062003cd45762003cd46200348c565b8262003cfb5762003ce5826200374d565b9150607d825160001a141562003cfb5762003dbe565b62003d06826200374d565b8062003d13898362003e1a565b915062003d20826200374d565b80516000603a82821a141562003dab5762003d408c8785018a8c62003a47565b819950809850811562003da85762003d70601f198c88030162003d6a888a038551608017620037cb565b6200378f565b82528051831a607d81141562003d8e57505050505050505062003dbe565b602c81141562003da657505050505050505062003db4565b505b50505b50505050508691505b9081019062003cbb565b0162003ca7818662003dd18588620037ad565b8662003987565b6001667e0000007e03ff602f198484015160001a011c1662003e025763101827966000526004601cfd5b60058214620007155762000715600183018262003dd8565b600082821062003e2e5762003e2e6200348c565b600180830191505b801562003ec4578151600090811a90602282141562003e5757505062003ec4565b605c821462003e6c5750509081019062003e36565b83830151901a90506a051011040000000000200160211982011c82161562003e9b576002830192505062003e36565b607581141562003ebf5762003eb260028462003dd8565b6006830192505062003e36565b508391505b83821062003ed65762003ed66200348c565b0192915050565b805b600a602f19825160001a011062003ef557919050565b60010162003edf565b805b600a602f19825160001a011062003f175762003f20565b60010162003f00565b8082146001161562000a035763101827966000526004601cfd5b82516000908490821a602d141562003f525750600184015b600a602f19825160001a011062003f6d5762003f6d6200348c565b805160001a6001820191506030811462003f8f5762003f8c8262003edd565b91505b50602e815160001a141562003faf5762003fac6001820162003efe565b90505b805160658160001a602017141562003fe05762003fdd60018362010001600d198560011a011a010162003efe565b91505b5062003fef81868686620039e7565b9150935093915050565b80516060908215811517156200400f5750919050565b63ffffffff8160581c81169250816010166200408c578160781c8116604051848460d81c841601601f1980601f8501165b828101518482015281018062004056576200405c565b62004040565b50505081815281810191506000602083015260408201604052809450620040848185620037e9565b601017865250505b5050919050565b8051606090821581151715620040a95750919050565b63ffffffff8160981c81169250816008166200408c578160b81c8116604051848460d81c841601601f1980601f8501165b8281015184820152810180620040f057620040f6565b620040da565b505050818152818101915060006020830152604082016040528094506200411e81856200378f565b600817865250505050919050565b60008060609050825160028160071611602080831663ffffffff8460381c8116846200420857881586151715620041635762004208565b8215620041735780965062004208565b60408051975084880180835b8015620041a9578083528051620041978e8262003771565b9091529187019160181c85166200417f565b50898203601f198181018060051c8d52848652620041c88d8d620037ad565b8a178f52858110620042015783945081838e01015b8551815187528152948a01948201808610620041f957620041ff565b620041dd565b505b5050505050505b509497965050505050505056fe60e08060405234156200001157600080fd5b620025658038036200002381620002fc565b80828439808301915060a08112156200003b57600080fd5b82516001600160401b03808211156200005357600080fd5b6101a08083850312156200006657600080fd5b620000706200035c565b935082860151828111156200008457600080fd5b62000094868883870101620003e1565b855250610100620000a781850162000459565b6020860152610120620000bc81860162000471565b60408701526101408086015185811115620000d657600080fd5b620000e6898b838a0101620003e1565b60608901525061016080870151868111156200010157600080fd5b620001118a8c838b0101620003e1565b60808a01525061018080880151878111156200012c57600080fd5b6200013c8b8d838c0101620003e1565b60a08b0152509487015194868611156200015557600080fd5b620001658a8c888b0101620003e1565b60c08a01526101c08801519550868611156200018057600080fd5b620001908a8c888b0101620003e1565b8b8a01526101e0880151955086861115620001aa57600080fd5b620001ba8a8c888b0101620003e1565b858a0152610200880151955086861115620001d457600080fd5b620001e48a8c888b0101620003e1565b848a0152610220880151955086861115620001fe57600080fd5b6200020e8a8c888b0101620003e1565b838a015262000221610240890162000482565b828a015262000234610260890162000497565b9089015283519650858711156200024a57600080fd5b6200025889888c01620003e1565b99508251985081519650620002728151888b8d8c6200095a565b50505050505050505050604051611aaa8062000a9b833960805182818161020201528181610d18015281816111d2015261192b015260a05182818160cc01528181610f2c0152818161121e0152611977015260c05182818161016101528181610d44015281816111f8015261195101528082f35b634e487b7160e01b600052604160045260246000fd5b60e0601f8201601f19168101906001600160401b0382119082101715620003275762000327620002e6565b60405250565b601f8201601f191681016001600160401b0381118282101715620003555762000355620002e6565b6040525050565b6040516101a081016001600160401b0381118282101715620003825762000382620002e6565b60405290565b6040516101c081016001600160401b0381118282101715620003825762000382620002e6565b60005b83811015620003cb578181015183820152602001620003b1565b83811115620003db576000848401525b50505050565b600082601f830112620003f357600080fd5b81516001600160401b038111156200040f576200040f620002e6565b60405162000428601f8301601f1916602001826200032d565b8181528460208386010111156200043e57600080fd5b62000451826020830160208701620003ae565b949350505050565b8051600781900b81146200046c57600080fd5b919050565b805180151581146200046c57600080fd5b805163ffffffff811681146200046c57600080fd5b80516001600160401b03811681146200046c57600080fd5b80620004f55760405162461bcd60e51b81526020600482015260186024820152776d696e743a2069735472616e73666572206973207472756560401b6044820152606481fd5b50565b80620004f55760405162461bcd60e51b815260206004820152600f60248201526e1d1a58dac81a5cc8125b9d985b1a59608a1b6044820152606481fd5b600181811c908216806200054a57607f821691505b602082108114156200056c57634e487b7160e01b600052602260045260246000fd5b50919050565b601f811115620005ce576004600090815260008051602062002545833981519152601f840160051c81016020851015620005a95750805b601f840160051c820191505b81811015620005ca57828155600101620005b5565b5050505b5050565b80516001600160401b03811115620005ee57620005ee620002e6565b62000606816200060060045462000535565b62000572565b602080601f8311600181146200063f5760008415620006255750848301515b600019600386901b1c1916600185901b17600455620005ca565b6004600052601f1984166000805160206200254583398151915260005b828110156200067d578786015182559484019460019091019084016200065c565b50858210156200069c5786850151600019600388901b60f8161c191681555b5050505050600190811b0160045550565b604051600090602081016001600160401b0381118282101715620006d557620006d5620002e6565b60405260008152919050565b6040805160009181016001600160401b0381118282101715620007085762000708620002e6565b60405260068152656465706c6f7960d01b6020820152919050565b604051600454600090620007378162000535565b808452600182811680156200075557600181146200076b576200079f565b60ff19841660208701526040860194506200079f565b600460005260208060002060005b858110156200079657815489820184015290840190820162000779565b88019091019550505b50505050620007b1828203836200032d565b5090565b60008151808452620007cf816020860160208601620003ae565b601f01601f19169290920160200192915050565b60208152600082516101c0806020850152620008046101e0850183620007b5565b91506020850151601f1980868503016040870152620008248483620007b5565b93506040870151915080868503016060870152620008438483620007b5565b9350606087015191506200085c608087018360070b9052565b60808701519150808685030160a0870152620008798483620007b5565b935060a08701519150808685030160c0870152620008988483620007b5565b935060c087015160e087015260e08701519150610100828188015280880151925050610120828188015280880151925050610140828188015280880151925050610160818786030181880152620008f08584620007b5565b945080880151925050610180818786030181880152620009118584620007b5565b9450808801519250506101a0818786030181880152620009328584620007b5565b908801518782039092018488015293509050620009508382620007b5565b9695505050505050565b620009736200096c6040830151151590565b15620004af565b620009826004835114620004f8565b6200098d82620005d2565b608083905260a084905260c0859052600580546001600160a01b031916331790558051602082015160070b6101008084015161012080860151608087015160a08801516060890151620009df62000388565b620009e9620006e1565b8152620009f562000723565b6020820152604081018a9052600789900b60608201528660808201528460a08201528c60c08201528e60e08201528d88820152600086820152836101408201528261016082015262000a46620006ad565b610180820152816101a082015260405199507f03f59c701b7eabc2a844931300da557fe352dd950116c342c8d0081f76318bc18a62000a86838d620007e3565b038ba150505050505050505050505050505056fe60406080815260043610610288576000803560e01c6306661abd81146100925763313ce56781146100b5576335ee5f8781146100f657633eaf5d9f81146101225763728c97ba811461014a57637e66f15f81146101875763a87d942c81146101a75763cb953c5081146101c75763d5abeb0181146101eb5763eb88f52c81146102285763f8474121811461025257610285565b341561009c578182fd5b6100a53661028e565b600654608052607f1960a0016080f35b34156100bf578182fd5b6100c83661028e565b82517f00000000000000000000000000000000000000000000000000000000000000008152602081f35b0381f35b3415610100578182fd5b61011161010c366103eb565b610871565b845182815260208101829052604081f35b341561012c578182fd5b6101353661028e565b61013d610465565b8351806100f28383610549565b3415610154578182fd5b61015d3661028e565b82517f00000000000000000000000000000000000000000000000000000000000000008152602081f35b3415610191578182fd5b61019a3661028e565b6003548351818152602081f35b34156101b1578182fd5b6101ba3661028e565b6006548351818152602081f35b34156101d1578182fd5b6101da366105ae565b6101e48183610ce5565b5050818351f35b34156101f5578182fd5b6101fe3661028e565b82517f00000000000000000000000000000000000000000000000000000000000000008152602081f35b3415610232578182fd5b61024361023e366103eb565b610892565b8551806100f2838587856107a9565b341561025c578182fd5b610265366105ae565b61026f8183610fa4565b9150508351806100f28383901515815260200190565b50505b50600080fd5b6000600319820112156102a057600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b604081016001600160401b03811182821017156102d8576102d86102a3565b60405250565b601f8201601f191681016001600160401b0381118282101715610303576103036102a3565b6040525050565b6040516101a081016001600160401b038111828210171561032d5761032d6102a3565b60405290565b6040516101c081016001600160401b038111828210171561032d5761032d6102a3565b604051606081016001600160401b038111828210171561032d5761032d6102a3565b600082601f83011261038957600080fd5b81356001600160401b038111156103a2576103a26102a3565b6040516103b9601f8301601f1916602001826102de565b8181528460208386010111156103ce57600080fd5b816020850160208301376000918101602001919091529392505050565b60006020600319830112156103ff57600080fd5b6004356001600160401b0381111561041657600080fd5b6104238382600401610378565b9392505050565b600181811c9082168061043e57607f821691505b6020821081141561045f57634e487b7160e01b600052602260045260246000fd5b50919050565b6040516004546000906104778161042a565b8084526001828116801561049257600181146104a7576104d9565b60ff19841660208701526040860194506104d9565b600460005260208060002060005b858110156104d05781548982018401529084019082016104b5565b88019091019550505b505050506104e9828203836102de565b5090565b60005b838110156105085781810151838201526020016104f0565b83811115610517576000848401525b50505050565b600081518084526105358160208601602086016104ed565b601f01601f19169290920160200192915050565b602081526000610423602083018461051d565b8035600781900b811461056e57600080fd5b919050565b8035801515811461056e57600080fd5b803563ffffffff8116811461056e57600080fd5b80356001600160401b038116811461056e57600080fd5b600080600319604084820112156105c457600080fd5b600480356001600160401b03808211156105dd57600080fd5b6101a0848389030112156105f057600080fd5b6105f861030a565b9350818301358181111561060b57600080fd5b610619888583860101610378565b8552506106286024830161055c565b602085015261063960448301610573565b604085015260648201358181111561065057600080fd5b61065e888583860101610378565b60608601525060848201358181111561067657600080fd5b610684888583860101610378565b60808601525060a48201358181111561069c57600080fd5b6106aa888583860101610378565b60a08601525060c4820135818111156106c257600080fd5b6106d0888583860101610378565b60c08601525060e4820135818111156106e857600080fd5b6106f6888583860101610378565b60e0860152506101048201358181111561070f57600080fd5b61071d888583860101610378565b610100860152506101248201358181111561073757600080fd5b610745888583860101610378565b610120860152506101448201358181111561075f57600080fd5b61076d888583860101610378565b61014086015250506107826101648201610583565b6101608401526107956101848201610597565b610180840152509094602435945092505050565b8181526060602082015260006107c2606083018561051d565b90508415156040830152949350505050565b600081516107e68185602086016104ed565b9290920192915050565b600060405182516108058183602087016104ed565b6000908201908152819003602001902092915050565b600060405182516108308183602087016104ed565b6001908201908152819003602001902092915050565b6000604051825161085b8183602087016104ed565b6002908201908152819003602001902092915050565b60008061087d836107f0565b546108878461081b565b549094909350915050565b60008060006108a084610846565b604051606081016001600160401b03811182821017156108c2576108c26102a3565b8060405250815481526001808301604051600082546108e08161042a565b80845281861680156108f9576001811461090e5761093f565b60ff198316602086015260408501935061093f565b8560005260208060002060005b8481101561093657815488820184015290890190820161091b565b87019091019450505b50505061094e828203836102de565b50602084018190526002949094015460ff16151560408401819052925198939750919550919350505050565b806102a05760405162461bcd60e51b81526020600482015260186024820152776d696e743a2069735472616e73666572206973207472756560401b6044820152606481fd5b806102a05760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08195b9d1c9e541bda5b9d60921b6044820152606481fd5b806102a05760405162461bcd60e51b815260206004820152601f60248201527f6d696e743a20746f74616c537570706c79206973206e6f7420656e6f756768006044820152606481fd5b806102a05760405162461bcd60e51b81526020600482015260176024820152761b5a5b9d0e88105b5bdd5b9d115e18d95959131a5b5a5d604a1b6044820152606481fd5b806102a05760405162461bcd60e51b81526020600482015260176024820152766d696e743a20726563656976657220697320656d70747960481b6044820152606481fd5b634e487b7160e01b600052601160045260246000fd5b6000600019821415610af657610af6610acc565b5060010190565b600082821015610b0f57610b0f610acc565b500390565b60008219821115610b2757610b27610acc565b500190565b604051600090602081016001600160401b0381118282101715610b5157610b516102a3565b60405260008152919050565b6000604051610b6b816102b9565b60048152631b5a5b9d60e21b6020820152919050565b60208152600082516101c0806020850152610ba06101e085018361051d565b91506020850151601f1980868503016040870152610bbe848361051d565b93506040870151915080868503016060870152610bdb848361051d565b935060608701519150610bf3608087018360070b9052565b60808701519150808685030160a0870152610c0e848361051d565b935060a08701519150808685030160c0870152610c2b848361051d565b935060c087015160e087015260e08701519150610100828188015280880151925050610120828188015280880151925050610140828188015280880151925050610160818786030181880152610c81858461051d565b945080880151925050610180818786030181880152610ca0858461051d565b9450808801519250506101a0818786030181880152610cbf858461051d565b908801518782039092018488015293509050610cdb838261051d565b9695505050505050565b610cfb610cf56040830151151590565b1561097a565b6005546001600160a01b0316610d123382146109bf565b506003547f0000000000000000000000000000000000000000000000000000000000000000610d428183106109fa565b7f00000000000000000000000000000000000000000000000000000000000000009150610d7182851115610a44565b60a08301610d828151511515610a88565b610d8c81516107f0565b54610da457610da4610d9f600654610ae2565b600655565b600354606090610db49084610afd565b60008782118015610dc757889150610dcb565b8291505b5087811015610e7557610ddd886119f7565b9150610de8816119f7565b60405180610e5d610e57610e44610e3e602086017f616d7420686173206265656e20637574206f666620746f20666974207468652081526f039bab838363c909037b934b3b4b71d160851b602082015260300190565b886107d4565b66016103737bb9d160cd1b815260070190565b846107d4565b039350601f1984018152610e7184826102de565b9350505b610e7f84516107f0565b9150610e8c818354610b14565b8255610e98845161081b565b9150610ea5818354610b14565b8255610ebb610eb682600354610b14565b600355565b50508451602086015160070b6101008701516101208089015160808a01518751975060608b0151610eea610333565b610ef2610b5d565b8152610efc610465565b602082015260408101889052600787900b60608201528560808201528360a08201528a60c08201528b60e08201527f00000000000000000000000000000000000000000000000000000000000000006101008201528d85820152826101408201528961016082015288610180820152816101a08201526040519b50600080516020611a478339815191528c610f91838f610b81565b038da15050505050505050505050505050565b6005546000906001600160a01b0316610fbe3382146109bf565b5081515161100b5760405162461bcd60e51b815260206004820181905260248201527f7472616e736665723a20696e736372697074696f6e496420697320656d7074796044820152606481fd5b604082015115611299576080820161102681515115156112a9565b6110308351610846565b60028101611047611042825460ff1690565b6112ef565b604051602081018161105c6001860183611339565b03601f19808201845261106f82856102de565b835183209350865192506040519150602082018261108d8583610549565b039350818401835261109f84846102de565b6110ad8351822086146113be565b5050505060a08601518051606092506110ce575083516110cb611408565b91505b6110d7816107f0565b546110ea576110ea610d9f600654610ae2565b83546110f5826107f0565b611100828254610b14565b905561110b8261081b565b611116828254610b14565b81555061112386516107f0565b61112e828254610afd565b81555061113b86516107f0565b5461114e5761114e610d9f600654611494565b835460ff19168455611169856111648a51610846565b6115f0565b8751945061117b602089015160070b90565b935061010080890151610120808b01518951995060608c015161119c610333565b6111a4611623565b81526111ae610465565b6020820152604081018b905260078a900b60608201528460808201528260a08201527f000000000000000000000000000000000000000000000000000000000000000060c08201527f000000000000000000000000000000000000000000000000000000000000000060e08201527f00000000000000000000000000000000000000000000000000000000000000008682015286848201528b6101408201528761016082015288610180820152816101a08201526040519b50600080516020611a478339815191528c611281838f610b81565b038da1505050505050505050505050600190506112a3565b6104238383611838565b92915050565b806102a05760405162461bcd60e51b81526020600482015260196024820152787472616e736665723a2073656e64657220697320656d70747960381b6044820152606481fd5b806102a05760405162461bcd60e51b815260206004820152601f60248201527f7472616e736665723a20496e736372697074696f6e49642069732075736564006044820152606481fd5b600060208083526000845461134d8161042a565b808487015260018083166000811461136c5760018114611381576113b1565b60ff19841660408901526060880194506113b1565b886000528560002060005b848110156113a85781548a82016040015290830190870161138c565b89016040019550505b5092979650505050505050565b806102a05760405162461bcd60e51b815260206004820152601d60248201527f7472616e736665723a2073656e646572206973206e6f74206f776e65720000006044820152606481fd5b604051600090608081016001600160401b038111828210171561142d5761142d6102a3565b6040908152604582527f726564697265637420726563656976657220746f2073656e6465722c2072656160208301527f736f6e3a207472616e7366657220696e736372697074696f6e20746f20636f6990820152646e6261736560d81b6060820152919050565b6000816114a3576114a3610acc565b506000190190565b60ff1981541660ff8315151681178255505050565b601f82111561150a57600081815260208120601f850160051c810160208610156114e75750805b601f850160051c820191505b81811015611506578281556001016114f3565b5050505b505050565b8181141561151b575050565b611525825461042a565b6001600160401b0381111561153c5761153c6102a3565b6115508161154a845461042a565b846114c0565b6000601f821160018114611584576000831561156c5750848201545b600019600385901b1c1916600184901b1784556115e9565b600085815260209020601f19841690600086815260209020845b838110156115be578286015482556001958601959091019060200161159e565b50858310156115dc5781850154600019600388901b60f8161c191681555b50505060018360011b0184555b5050505050565b81811461161f578154815561160b600183016001830161150f565b61161f60ff600284015416600283016114ab565b5050565b6000604051611631816102b9565b60088152673a3930b739b332b960c11b6020820152919050565b806102a05760405162461bcd60e51b815260206004820152601b60248201527a7472616e736665723a20726563656976657220697320656d70747960281b6044820152606481fd5b806102a05760405162461bcd60e51b815260206004820181905260248201527f7472616e736665723a20696e736372697074696f6e49642069732065786973746044820152606481fd5b806102a05760405162461bcd60e51b815260206004820152601d60248201527f7472616e736665723a20496e73756666696369656e7442616c616e63650000006044820152606481fd5b815181556001808201602080850151805160018060401b0381111561174e5761174e6102a3565b6117628161175c865461042a565b866114c0565b82601f821160018114611793576000831561177d5750838201515b600019600385901b1c191683881b1786556117e8565b600086815260208120601f198516915b828110156117c057868501518255938701939089019087016117a3565b50848210156117de5785840151600019600387901b60f8161c191681555b50508683881b0186555b5050505050505061161f6117ff6040840151151590565b600283016114ab565b6000604051611816816102b9565b601081526f34b739b1b934b132aa3930b739b332b960811b6020820152919050565b600060a0820161184b815151151561164b565b6118558351610892565b50611861815115611693565b505061186d8151610871565b611879868210156116dd565b5050611885815161081b565b611890858254610afd565b9055805161189c610356565b8581528160208201526118b26040820160019052565b6118c5816118c08751610846565b611727565b50508251602084015160070b610100808601516101208088015160808901518751975060608a01516118f5610333565b6118fd611808565b8152611907610465565b602082015260408101899052600788900b60608201528560808201528360a08201527f000000000000000000000000000000000000000000000000000000000000000060c08201527f000000000000000000000000000000000000000000000000000000000000000060e08201527f0000000000000000000000000000000000000000000000000000000000000000878201528c8582015282610140820152896101608201526119b5610b2c565b610180820152816101a08201526040519950600080516020611a478339815191528a6119e1838d610b81565b038ba15060019c9b505050505050505050505050565b600060405160808101915060a0810160405260008252825b60001983019250600a8082066030018453900480611a2c57611a31565b611a0f565b50819003608001601f1990910190815291905056fe03f59c701b7eabc2a844931300da557fe352dd950116c342c8d0081f76318bc1a364697066735822122051038bf578788e17f611d4071cd36bc09918836542b3d5266269c5f2080bff906c6578706572696d656e74616cf564736f6c634300080900418a35acfbc15ff81a39ae7d344fd709f28e8600b4aa8c65c6b64bfe7fe36bd19b8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0b10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf6a36469706673582212203e8fa8ebc602a58e022ed2f4ada07dd520479c2da243bdccbc2720ab1acb39256c6578706572696d656e74616cf564736f6c63430008090041\",\"name\":\"brc-20\",\"op\":\"create\",\"p\":\"brczero\",\"waitinit\":true}" \
  --inscription_context "{\"inscription_id\":\"46d116b777590ef08dc94f8b54d91ac9fa6e28bc3f06f574f8f2e75dc0d1db32i0\",\"inscription_number\":0,\"is_transfer\":false,\"txid\":\"46d116b777590ef08dc94f8b54d91ac9fa6e28bc3f06f574f8f2e75dc0d1db32\",\"sender\":\"bcrt1qd28jewrz9y9hpl328em5fpljvgarucgcxf7fjt\",\"receiver\":\"bcrt1qd28jewrz9y9hpl328em5fpljvgarucgcxf7fjt\",\"commit_input\":\"\",\"reveal_output\":\"\",\"old_sat_point\":\"9fdc76fe873b11566dff1adabe4b6fd92be3cd832445b8b2b1b7e4e452c23eeb:0:0\",\"new_sat_point\":\"46d116b777590ef08dc94f8b54d91ac9fa6e28bc3f06f574f8f2e75dc0d1db32:0:0\",\"block_hash\":\"071844699637412cca4d38175eaf5420d27b454116efea1c3d20a36548befd5e\",\"block_time\":1700669916,\"block_height\":0}" \
  --home $HOME_SERVER \
  --chain-id $CHAINID
# Collect genesis tx
brczerod collect-gentxs --home $HOME_SERVER

# Run this to ensure everything worked and that the genesis file is setup correctly
brczerod validate-genesis --home $HOME_SERVER
brczerocli config keyring-backend test

run

sleep 4

