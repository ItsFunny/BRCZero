#!/bin/bash

KEY="captain"
CHAINID="brczero-67"
MONIKER="brczero"
CURDIR=`dirname $0`
HOME_SERVER=$CURDIR/"_cache_evm"

set -e
set -o errexit
set -a
set -m


killbyname() {
  NAME=$1
  ps -ef|grep "$NAME"|grep -v grep |awk '{print "kill -9 "$2", "$8}'
  ps -ef|grep "$NAME"|grep -v grep |awk '{print "kill -9 "$2}' | sh
  echo "All <$NAME> killed!"
}


run() {
    LOG_LEVEL=main:info,iavl:info,*:error,state:info,provider:info
#--mempool.enable_delete_min_gp_tx false \
#    brczerod start --pruning=nothing --rpc.unsafe \
    nohup brczerod start --rpc.unsafe \
      --local-rpc-port 26657 \
      --log_level $LOG_LEVEL \
      --log_file json \
      --dynamic-gp-mode=2 \
      --consensus.timeout_commit 4000ms \
      --consensus.create_empty_blocks=false \
      --tree-enable-async-commit=false \
      --enable-gid \
      --fast-query=false \
      --append-pid=true \
      --iavl-output-modules evm=0,acc=0 \
      --commit-gap-height 3 \
      --trie.dirty-disabled=true \
      --trace --home $HOME_SERVER --chain-id $CHAINID \
      --elapsed Round=1,CommitRound=1,Produce=1 \
      --rest.laddr "tcp://localhost:8545" > brc10.txt 2>&1 &

# --iavl-commit-interval-height \
# --iavl-enable-async-commit \
#      --iavl-cache-size int                              Max size of iavl cache (default 1000000)
#      --iavl-commit-interval-height int                  Max interval to commit node cache into leveldb (default 100)
#      --iavl-debug int                                   Enable iavl project debug
#      --iavl-enable-async-commit                         Enable async commit
#      --iavl-enable-pruning-history-state                Enable pruning history state
#      --iavl-height-orphans-cache-size int               Max orphan version to cache in memory (default 8)
#      --iavl-max-committed-height-num int                Max committed version to cache in memory (default 8)
#      --iavl-min-commit-item-count int                   Min nodes num to triggle node cache commit (default 500000)
#      --iavl-output-modules

}


killbyname brczerod
killbyname brczerocli

set -x # activate debugging

# run

# remove existing daemon and client
rm -rf ~/.brczero*
rm -rf $HOME_SERVER

(cd .. && make install)

# Set up config for CLI
brczerocli config chain-id $CHAINID
brczerocli config output json
brczerocli config indent true
brczerocli config trust-node true
brczerocli config keyring-backend test

# if $KEY exists it should be deleted
#
#    "eth_address": "0xbbE4733d85bc2b90682147779DA49caB38C0aA1F",
#     prikey: 8ff3ca2d9985c3a52b459e2f6e7822b23e1af845961e22128d5f372fb9aa5f17
brczerocli keys add --recover captain -m "puzzle glide follow cruel say burst deliver wild tragic galaxy lumber offer" -y

#    "eth_address": "0x83D83497431C2D3FEab296a9fba4e5FaDD2f7eD0",
brczerocli keys add --recover admin16 -m "palace cube bitter light woman side pave cereal donor bronze twice work" -y

brczerocli keys add --recover admin17 -m "antique onion adult slot sad dizzy sure among cement demise submit scare" -y

brczerocli keys add --recover admin18 -m "lazy cause kite fence gravity regret visa fuel tone clerk motor rent" -y

# Set moniker and chain-id for Ethermint (Moniker can be anything, chain-id must be an integer)
brczerod init $MONIKER --chain-id $CHAINID --home $HOME_SERVER

# Change parameter token denominations to brc10
cat $HOME_SERVER/config/genesis.json | jq '.app_state["staking"]["params"]["bond_denom"]="brc10"' > $HOME_SERVER/config/tmp_genesis.json && mv $HOME_SERVER/config/tmp_genesis.json $HOME_SERVER/config/genesis.json
cat $HOME_SERVER/config/genesis.json | jq '.app_state["crisis"]["constant_fee"]["denom"]="brc10"' > $HOME_SERVER/config/tmp_genesis.json && mv $HOME_SERVER/config/tmp_genesis.json $HOME_SERVER/config/genesis.json
cat $HOME_SERVER/config/genesis.json | jq '.app_state["gov"]["deposit_params"]["min_deposit"][0]["denom"]="brc10"' > $HOME_SERVER/config/tmp_genesis.json && mv $HOME_SERVER/config/tmp_genesis.json $HOME_SERVER/config/genesis.json
cat $HOME_SERVER/config/genesis.json | jq '.app_state["mint"]["params"]["mint_denom"]="brc10"' > $HOME_SERVER/config/tmp_genesis.json && mv $HOME_SERVER/config/tmp_genesis.json $HOME_SERVER/config/genesis.json

# Enable EVM

if [ "$(uname -s)" == "Darwin" ]; then
    sed -i "" 's/"enable_call": false/"enable_call": true/' $HOME_SERVER/config/genesis.json
    sed -i "" 's/"enable_create": false/"enable_create": true/' $HOME_SERVER/config/genesis.json
    sed -i "" 's/"enable_contract_blocked_list": false/"enable_contract_blocked_list": true/' $HOME_SERVER/config/genesis.json
else
    sed -i 's/"enable_call": false/"enable_call": true/' $HOME_SERVER/config/genesis.json
    sed -i 's/"enable_create": false/"enable_create": true/' $HOME_SERVER/config/genesis.json
    sed -i 's/"enable_contract_blocked_list": false/"enable_contract_blocked_list": true/' $HOME_SERVER/config/genesis.json
fi

# Allocate genesis accounts (cosmos formatted addresses)
brczerod add-genesis-account $(brczerocli keys show $KEY    -a) 100000000brc10 --home $HOME_SERVER
brczerod add-genesis-account $(brczerocli keys show admin16 -a) 900000000brc10 --home $HOME_SERVER
brczerod add-genesis-account $(brczerocli keys show admin17 -a) 900000000brc10 --home $HOME_SERVER
brczerod add-genesis-account $(brczerocli keys show admin18 -a) 900000000brc10 --home $HOME_SERVER

# Sign genesis transaction
brczerod gentx --name $KEY --keyring-backend test --home $HOME_SERVER

brczerod geninscription \
  --inscription "{\"d\":\"608060405234801561001057600080fd5b506162d6806100206000396000f3fe60806040523480156200001157600080fd5b5060043610620001215760003560e01c80639234b73311620000af578063d836fd03116200007a578063d836fd031462000246578063ded3384c1462000155578063e7ab22e0146200016d578063e8d5e69a146200025f578063f719f6aa146200027857600080fd5b80639234b73314620001e1578063cb60a0a214620001d8578063cde3608e1462000207578063d57dc253146200023c57600080fd5b806358648cdf11620000f057806358648cdf14620001765780636ac3d07b146200017f578063705bff6514620001b257806385410acd14620001d857600080fd5b8063017ae8ee1462000126578063088946d41462000155578063360b5d8e146200016d578063447c6380146200016d575b600080fd5b6200013d62000137366004620035ce565b6200029e565b6040516200014c919062003663565b60405180910390f35b6200015e600581565b6040519081526020016200014c565b6200015e600481565b6200015e601281565b6200019662000190366004620036f2565b62000582565b604080519384526020840192909252908201526060016200014c565b620001c9620001c33660046200375c565b620006cf565b6040516200014c919062003776565b6200015e600681565b620001f8620001f2366004620035ce565b62000784565b6040516200014c9190620037e7565b62000223736a8f2cb862290b70fe2a3e774487f2623a3e611881565b6040516001600160a01b0390911681526020016200014c565b6200022361100081565b6200025062000a57565b6040516200014c9190620037fc565b6200027662000270366004620038c1565b62000f75565b005b6200028f6200028936600462003ad1565b6200124c565b6040516200014c919062003af4565b60008054606091816001600160401b03811115620002c057620002c0620034d3565b6040519080825280602002602001820160405280156200031f57816020015b6200030b6040518060800160405280606081526020016000815260200160008152602001600081525090565b815260200190600190039081620002df5790505b50905060005b828110156200045e57600080828154811062000345576200034562003b4d565b9060005260206000200180546200035c9062003b63565b80601f01602080910402602001604051908101604052809291908181526020018280546200038a9062003b63565b8015620003db5780601f10620003af57610100808354040283529160200191620003db565b820191906000526020600020905b815481529060010190602001808311620003bd57829003601f168201915b505050505090506000806000620003f3898562000582565b92509250925082600014620004445760405180608001604052808581526020018481526020018381526020018281525086868151811062000438576200043862003b4d565b60200260200101819052505b505050508080620004559062003bb0565b91505062000325565b506000826001600160401b038111156200047c576200047c620034d3565b604051908082528060200260200182016040528015620004db57816020015b620004c76040518060800160405280606081526020016000815260200160008152602001600081525090565b8152602001906001900390816200049b5790505b5090506000805b84811015620005775783818151811062000500576200050062003b4d565b602002602001015160200151600014620005625783818151811062000529576200052962003b4d565b602002602001015183838151811062000546576200054662003b4d565b602002602001018190525081806200055e9062003bb0565b9250505b806200056e8162003bb0565b915050620004e2565b508152949350505050565b6000806000620005928462001408565b935060006001600160a01b0316600185604051620005b1919062003bce565b908152604051908190036020019020546001600160a01b03161415620006165760405162461bcd60e51b8152602060048201526015602482015274109490cc8c081a5cc81b9bdd0819195c1b1bde5959605a1b60448201526064015b60405180910390fd5b60018460405162000628919062003bce565b908152604051908190036020018120546335ee5f8760e01b82526001600160a01b0316906335ee5f87906200066290889060040162003776565b604080518083038186803b1580156200067a57600080fd5b505afa1580156200068f573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190620006b5919062003bec565b9093509150620006c6828462003c11565b90509250925092565b60008181548110620006e057600080fd5b906000526020600020016000915090508054620006fd9062003b63565b80601f01602080910402602001604051908101604052809291908181526020018280546200072b9062003b63565b80156200077c5780601f1062000750576101008083540402835291602001916200077c565b820191906000526020600020905b8154815290600101906020018083116200075e57829003601f168201915b505050505081565b6200078e620033e0565b620007998262001408565b91506000600183604051620007af919062003bce565b908152604051908190036020019020546001600160a01b03169050801562000a51576040518060c00160405280826001600160a01b0316633eaf5d9f6040518163ffffffff1660e01b815260040160006040518083038186803b1580156200081657600080fd5b505afa1580156200082b573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405262000855919081019062003c2b565b8152602001826001600160a01b03168152602001826001600160a01b031663d5abeb016040518163ffffffff1660e01b815260040160206040518083038186803b158015620008a357600080fd5b505afa158015620008b8573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190620008de919062003ca1565b8152602001826001600160a01b0316637e66f15f6040518163ffffffff1660e01b815260040160206040518083038186803b1580156200091d57600080fd5b505afa15801562000932573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062000958919062003ca1565b8152602001826001600160a01b031663313ce5676040518163ffffffff1660e01b815260040160206040518083038186803b1580156200099757600080fd5b505afa158015620009ac573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190620009d2919062003ca1565b8152602001826001600160a01b031663728c97ba6040518163ffffffff1660e01b815260040160206040518083038186803b15801562000a1157600080fd5b505afa15801562000a26573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062000a4c919062003ca1565b905291505b50919050565b60008054606091816001600160401b0381111562000a795762000a79620034d3565b60405190808252806020026020018201604052801562000ab657816020015b62000aa2620033e0565b81526020019060019003908162000a985790505b50905060005b8281101562000e6257600062000b826000838154811062000ae15762000ae162003b4d565b90600052602060002001805462000af89062003b63565b80601f016020809104026020016040519081016040528092919081815260200182805462000b269062003b63565b801562000b775780601f1062000b4b5761010080835404028352916020019162000b77565b820191906000526020600020905b81548152906001019060200180831162000b5957829003601f168201915b505050505062001408565b9050600060018260405162000b98919062003bce565b908152604080519182900360200182205460c08301808352633eaf5d9f60e01b905290516001600160a01b03909116925081908390633eaf5d9f9060c480850191600091818703018186803b15801562000bf157600080fd5b505afa15801562000c06573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405262000c30919081019062003c2b565b8152602001826001600160a01b03168152602001826001600160a01b031663d5abeb016040518163ffffffff1660e01b815260040160206040518083038186803b15801562000c7e57600080fd5b505afa15801562000c93573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062000cb9919062003ca1565b8152602001826001600160a01b0316637e66f15f6040518163ffffffff1660e01b815260040160206040518083038186803b15801562000cf857600080fd5b505afa15801562000d0d573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062000d33919062003ca1565b8152602001826001600160a01b031663313ce5676040518163ffffffff1660e01b815260040160206040518083038186803b15801562000d7257600080fd5b505afa15801562000d87573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062000dad919062003ca1565b8152602001826001600160a01b031663728c97ba6040518163ffffffff1660e01b815260040160206040518083038186803b15801562000dec57600080fd5b505afa15801562000e01573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062000e27919062003ca1565b81525084848151811062000e3f5762000e3f62003b4d565b60200260200101819052505050808062000e599062003bb0565b91505062000abc565b506000826001600160401b0381111562000e805762000e80620034d3565b60405190808252806020026020018201604052801562000ebd57816020015b62000ea9620033e0565b81526020019060019003908162000e9f5790505b5090506000805b8481101562000f6b5760006001600160a01b031684828151811062000eed5762000eed62003b4d565b6020026020010151602001516001600160a01b03161462000f565783818151811062000f1d5762000f1d62003b4d565b602002602001015183838151811062000f3a5762000f3a62003b4d565b6020026020010181905250818062000f529062003bb0565b9250505b8062000f628162003bb0565b91505062000ec4565b5081529392505050565b600062000f828262001508565b905062000ff660405180604001604052806008815260200167113139319699181160c11b81525062000fe362000fdd6040518060400160405280600381526020016211381160e91b815250856200152a90919063ffffffff16565b6200159f565b8151602092830120815191909201201490565b620010445760405162461bcd60e51b815260206004820152601e60248201527f6e6f742062726332302070726f746f63616c207472616e73616374696f6e000060448201526064016200060d565b6200108162001079604051806040016040528060048152602001631137b81160e11b815250836200152a90919063ffffffff16565b516007161590565b15620010c65760405162461bcd60e51b81526020600482015260136024820152721bdc195c985d1a5bdb881d5b9919599a5b9959606a1b60448201526064016200060d565b6200112060405180604001604052806008815260200167113232b83637bc9160c11b81525062000fe362000fdd604051806040016040528060048152602001631137b81160e11b815250856200152a90919063ffffffff16565b156200113757620011328382620015b0565b505050565b6200118f604051806040016040528060068152602001651136b4b73a1160d11b81525062000fe362000fdd604051806040016040528060048152602001631137b81160e11b815250856200152a90919063ffffffff16565b15620011a157620011328382620016a6565b620011fd6040518060400160405280600a815260200169113a3930b739b332b91160b11b81525062000fe362000fdd604051806040016040528060048152602001631137b81160e11b815250856200152a90919063ffffffff16565b156200120f5762001132838262001745565b60405162461bcd60e51b815260206004820152601160248201527034b63632b3b0b61037b832b930ba34b7b760791b60448201526064016200060d565b6060818310620012955760405162461bcd60e51b81526020600482015260136024820152721a5b1b1959d85b081a5b99195e081a5b9c1d5d606a1b60448201526064016200060d565b6000620012a3848462003c11565b90506000816001600160401b03811115620012c257620012c2620034d3565b604051908082528060200260200182016040528015620012f757816020015b6060815260200190600190039081620012e15790505b50905060005b82811015620013fd5760008062001315838962003cbb565b8154811062001328576200132862003b4d565b9060005260206000200180546200133f9062003b63565b80601f01602080910402602001604051908101604052809291908181526020018280546200136d9062003b63565b8015620013be5780601f106200139257610100808354040283529160200191620013be565b820191906000526020600020905b815481529060010190602001808311620013a057829003601f168201915b5050505050905080838381518110620013db57620013db62003b4d565b6020026020010181905250508080620013f49062003bb0565b915050620012fd565b509150505b92915050565b60606000806110006001600160a01b0316846040516024016200142c919062003776565b60408051601f198184030181529181526020820180516001600160e01b0316639416b42360e01b1790525162001463919062003bce565b600060405180830381855afa9150503d8060008114620014a0576040519150601f19603f3d011682016040523d82523d6000602084013e620014a5565b606091505b509150915081620014ea5760405162461bcd60e51b815260206004820152600e60248201526d1d1bd31bddd95c8819985a5b195960921b60448201526064016200060d565b8080602001905181019062001500919062003c2b565b949350505050565b6040805160008082529181905290620015238360ff62001807565b9392505050565b6040805160008152905281516060906007166002141562001402578151602083012060006200155985620020a3565b805190915060051b5b80156200159657818101519550601f1901826200157f87620020b5565b8051906020012014620015925762001562565b8593505b50505092915050565b606060006200152383600062001807565b6000620015bd82620020d7565b90506000838260000151836040015184608001518560600151604051620015e4906200341f565b620015f495949392919062003e3a565b604051809103906000f08015801562001611573d6000803e3d6000fd5b50905080600183602001516040516200162b919062003bce565b9081526040516020918190038201902080546001600160a01b0319166001600160a01b03939093169290921790915582516000805460018101825590805281516200169f937f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e56390920192909101906200342d565b5050505050565b6000620016b3826200265e565b905060018160000151604051620016cb919062003bce565b908152604051602091819003820181205491830151630cb953c560e41b82526001600160a01b039092169163cb953c50916200170c91879160040162003e81565b600060405180830381600087803b1580156200172757600080fd5b505af11580156200173c573d6000803e3d6000fd5b50505050505050565b6000620017528262002980565b9050600181600001516040516200176a919062003bce565b90815260405160209181900382018120549183015163f847412160e01b82526001600160a01b039092169163f847412191620017ab91879160040162003e81565b602060405180830381600087803b158015620017c657600080fd5b505af1158015620017db573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062001801919062003ea5565b50505050565b600062001fe6565b63101827966000526004601cfd5b805b600164010000260062001833835160001a90565b1c16620018405762001402565b6001016200181f565b63ffffffff83113d3d3e63ffffffff821b191691901b1790565b60405162001889848603607862001883601f198689030160588862001849565b62001849565b959095178552505050602082016040525090565b600080620018b084601860005162001849565b620018bc87876200181d565b9150868210620018cd575062001a19565b815160001a6022811415620019065782620018eb8985858962001c77565b9350620018fd60048583868a62001863565b94505062001a08565b605b81141562001928576200191e8884848862001a22565b9350935062001a08565b607b81141562001940576200191e8884848862001b0a565b6703ff200000000000811c6001161562001962576200191e8884848862001d68565b876004840111620019c65782835160e01c6374727565811415620019a0576004850194506200199660058684878b62001863565b9550505062001a08565b636e756c6c811415620019c3576004850194506200199660068684878b62001863565b50505b876005840111620019fe5782835160d81c6466616c7365811415620019fb576005850194506200199660058684878b62001863565b50505b62001a086200180f565b505062001a1686826200181d565b90505b94509492505050565b600060018401815b86821062001a3c5762001a3c6200180f565b8262001a6b5762001a4e87836200181d565b9150605d62001a5e835160001a90565b141562001a6b5762001adb565b62001a79878385876200189d565b92509250821562001acb5762001a96816098855160401762001849565b835260010162001aa7825160001a90565b605d81141562001ab8575062001adb565b602c81141562001ac9575062001acf565b505b8691505b60018201915062001a2a565b5060010162001aed8260388662001849565b935062001aff60018287878762001863565b915094509492505050565b6000600184015b85811062001b235762001b236200180f565b8162001b525762001b3586826200181d565b9050607d62001b45825160001a90565b141562001b525762001c0c565b62001b5e86826200181d565b90508062001b6f8783858762001c77565b62001b7b88826200181d565b9250603a62001b8b845160001a90565b141562001bfd5762001ba3886001850186886200189d565b93509350831562001bfd5762001bce60208601830360986200188385850360b8895160801762001849565b8452825160001a607d81141562001be85750505062001c0c565b602c81141562001bfb5750505062001c03565b505b50508590505b60010162001b11565b60010162001c1d8260388662001849565b935062001aff60028287878762001863565b6001667e0000007e03ff603062001c498585015160001a90565b031c1662001c5b5762001c5b6200180f565b6005821462001c735762001c73600183018262001c2f565b5050565b5050600082821062001c8d5762001c8d6200180f565b50600181015b805160001a602281141562001ca9575062001d10565b605c811462001cbc575060010162001c93565b600182015160001a905060016a0510110400000000002001602283031c161562001cea575060020162001c93565b607581141562001d0b5762001d0160028362001c2f565b5060060162001c93565b508290505b82811062001d225762001d226200180f565b60010192915050565b805b600a603062001d3d835160001a90565b031062001d4a5762001d53565b60010162001d2d565b8082148416156200152357620015236200180f565b600083602d62001d79825160001a90565b141562001d84576001015b600a603062001d94835160001a90565b031062001da55762001da56200180f565b805160001a6001820191506030811462001dca5762001dc76000888462001d2b565b91505b50602e62001dd9825160001a90565b141562001df45762001df16001876001840162001d2b565b90505b805160658160001a602017141562001e275762001e246001886001850162010001600e8660011a031a0162001d2b565b91505b5062001aff60038287878762001863565b60405190820190601f19601f850181165b838101518382015281018062001e5f5762001e65565b62001e49565b50508381526000846020830101528360408201016040529392505050565b848362001e38565b80516060906002816007161162000a515782158115171562001ead5762000a51565b602081161562001eca57603881901c63ffffffff16915062000a51565b604051915060208201603882901c63ffffffff165b801562001f15578082528051601881901c63ffffffff1662001f048760188462001849565b909252506020919091019062001edf565b50601f1983820381018060051c85528260405262001f368560388662001849565b93508360201786526040811062001f77576020850192508085015b8351815185528152602090930192820180841062001f6f5762001f75565b62001f51565b505b50505050919050565b805160609082158115171562001f97575062001500565b80841c63ffffffff16915080861662001fdd5760d881901c63ffffffff1662001fc882871c63ffffffff1662001e83565b92505062001fd882858362001849565b861783525b50949350505050565b8180156200206457600181146200207d57600381146200208e5760208401845181018082146200204657805160001a602282536200202b8760d8601160f91b62001849565b6000526200203d828460008a6200189d565b93509450808253505b831581831017156200205c576200205c6200180f565b50506200209c565b620020756010607860588762001f80565b91506200209c565b62002075600860b860988762001f80565b620020998462001e8b565b91505b5092915050565b6060600062001523835b600362001807565b805160609060801615620020d25760006200152383600162001807565b919050565b6200210a6040518060a0016040528060608152602001606081526020016000815260200160008152602001600081525090565b6000620021178362002ddc565b905060008060006004841015801562002131575060068411155b6200218b5760405162461bcd60e51b8152602060048201526024808201527f6f7065726174696f6e206465706c6f79203a206974656d2053697a6520696c6c6044820152631959d85b60e21b60648201526084016200060d565b620021c162001079604051806040016040528060058152602001641136b0bc1160d91b815250886200152a90919063ffffffff16565b156200221c5760405162461bcd60e51b8152602060048201526024808201527f6f7065726174696f6e206465706c6f79203a206d617820697320756e646566696044820152631b99195960e21b60648201526084016200060d565b620022536200107960405180604001604052806006815260200165113a34b1b59160d11b815250886200152a90919063ffffffff16565b15620022b05760405162461bcd60e51b815260206004820152602560248201527f6f7065726174696f6e206465706c6f79203a207469636b20697320756e6465666044820152641a5b99195960da1b60648201526084016200060d565b6004841415620022f35760129250620022e886604051806040016040528060058152602001641136b0bc1160d91b8152508562002df2565b91508190506200258a565b60058414156200245557620023336200107960405180604001604052806005815260200164113634b69160d91b815250886200152a90919063ffffffff16565b6200239a57601292506200236686604051806040016040528060058152602001641136b0bc1160d91b8152508562002df2565b9150620023928660405180604001604052806005815260200164113634b69160d91b8152508562002df2565b90506200258a565b620023d06200107960405180604001604052806005815260200164113232b19160d91b815250886200152a90919063ffffffff16565b6200240c57620023e08662002eab565b9250620022e886604051806040016040528060058152602001641136b0bc1160d91b8152508562002df2565b60405162461bcd60e51b815260206004820152601e60248201527f6f7065726174696f6e206465706c6f79203a206b657920696c6c6567616c000060448201526064016200060d565b60068414156200258a57620024956200107960405180604001604052806005815260200164113634b69160d91b815250886200152a90919063ffffffff16565b158015620024d65750620024d46200107960405180604001604052806005815260200164113232b19160d91b815250886200152a90919063ffffffff16565b155b620025245760405162461bcd60e51b815260206004820152601e60248201527f6f7065726174696f6e206465706c6f79203a206b657920696c6c6567616c000060448201526064016200060d565b6200252f8662002eab565b92506200255b86604051806040016040528060058152602001641136b0bc1160d91b8152508562002df2565b9150620025878660405180604001604052806005815260200164113634b69160d91b8152508562002df2565b90505b600080620025988862002f53565b9150915060006001600160a01b0316600182604051620025b9919062003bce565b908152604051908190036020019020546001600160a01b0316146200262f5760405162461bcd60e51b815260206004820152602560248201527f6f7065726174696f6e206465706c6f79203a20425243323020686173206465706044820152641b1bde595960da1b60648201526084016200060d565b6040805160a0810182529283526020830191909152810192909252606082015260808101919091529392505050565b6040805180820190915260608152600060208201526004620026808362002ddc565b14620026da5760405162461bcd60e51b815260206004820152602260248201527f6f7065726174696f6e206d696e74203a206974656d2053697a6520696c6c6567604482015261185b60f21b60648201526084016200060d565b620027116200107960405180604001604052806006815260200165113a34b1b59160d11b815250846200152a90919063ffffffff16565b156200276c5760405162461bcd60e51b815260206004820152602360248201527f6f7065726174696f6e206d696e74203a207469636b20697320756e646566696e60448201526219195960ea1b60648201526084016200060d565b620027a262001079604051806040016040528060058152602001641130b6ba1160d91b815250846200152a90919063ffffffff16565b15620027fc5760405162461bcd60e51b815260206004820152602260248201527f6f7065726174696f6e206d696e74203a20616d7420697320756e646566696e64604482015261195960f21b60648201526084016200060d565b6000806200280a8462002f53565b9150915060006001600160a01b03166001826040516200282b919062003bce565b908152604051908190036020019020546001600160a01b03161415620028a35760405162461bcd60e51b815260206004820152602660248201527f6f7065726174696f6e206d696e74203a204252433230206973206e6f742064656044820152651c1b1bde595960d21b60648201526084016200060d565b60006200296685604051806040016040528060058152602001641130b6ba1160d91b815250600185604051620028da919062003bce565b90815260408051602092819003830181205463313ce56760e01b825291516001600160a01b039092169263313ce56792600480840193829003018186803b1580156200292557600080fd5b505afa1580156200293a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019062002960919062003ca1565b62002df2565b604080518082019091529283526020830152509392505050565b6040805180820190915260608152600060208201526000620029a28362002ddc565b905060048110158015620029b7575060068111155b62002a145760405162461bcd60e51b815260206004820152602660248201527f6f7065726174696f6e207472616e73666572203a206974656d2053697a6520696044820152651b1b1959d85b60d21b60648201526084016200060d565b62002a4b6200107960405180604001604052806006815260200165113a34b1b59160d11b815250856200152a90919063ffffffff16565b1562002aaa5760405162461bcd60e51b815260206004820152602760248201527f6f7065726174696f6e207472616e73666572203a207469636b20697320756e6460448201526619599a5b99195960ca1b60648201526084016200060d565b62002ae062001079604051806040016040528060058152602001641130b6ba1160d91b815250856200152a90919063ffffffff16565b1562002b3e5760405162461bcd60e51b815260206004820152602660248201527f6f7065726174696f6e207472616e73666572203a20616d7420697320756e6465604482015265199a5b99195960d21b60648201526084016200060d565b600581141562002c115762002b7d6200107960405180604001604052806004815260200163113a379160e11b815250856200152a90919063ffffffff16565b158062002bbd575062002bbb6200107960405180604001604052806005815260200164113332b29160d91b815250856200152a90919063ffffffff16565b155b62002c0b5760405162461bcd60e51b815260206004820181905260248201527f6f7065726174696f6e207472616e73666572203a206b657920696c6c6567616c60448201526064016200060d565b62002cdf565b600681141562002cdf5762002c506200107960405180604001604052806004815260200163113a379160e11b815250856200152a90919063ffffffff16565b15801562002c91575062002c8f6200107960405180604001604052806005815260200164113332b29160d91b815250856200152a90919063ffffffff16565b155b62002cdf5760405162461bcd60e51b815260206004820181905260248201527f6f7065726174696f6e207472616e73666572203a206b657920696c6c6567616c60448201526064016200060d565b60008062002ced8562002f53565b9150915060006001600160a01b031660018260405162002d0e919062003bce565b908152604051908190036020019020546001600160a01b0316141562002d8a5760405162461bcd60e51b815260206004820152602a60248201527f6f7065726174696f6e207472616e73666572203a204252433230206973206e6f6044820152691d0819195c1b1bde595960b21b60648201526084016200060d565b600062002dc186604051806040016040528060058152602001641130b6ba1160d91b815250600185604051620028da919062003bce565b60408051808201909152928352602083015250949350505050565b60008062002dea83620020ad565b519392505050565b600062002e1962002e1262002e0c62000fdd87876200152a565b62002fa5565b8362003259565b905060008111801562002e4b575062002e3482600a62003fc2565b62002e47906001600160401b0362003fd0565b8111155b620015235760405162461bcd60e51b815260206004820152602960248201527f6465636f64654e756d626572416e64466f726d616c697a65203a20696c6c656760448201526830b610373ab6b132b960b91b60648201526084016200060d565b600062002ef162002eeb62002e0c62000fdd60405180604001604052806005815260200164113232b19160d91b815250866200152a90919063ffffffff16565b62003360565b90506012811115801562002f055750600081115b620020d25760405162461bcd60e51b815260206004820152601760248201527f6465636f6465446563203a20696c6c6567616c2064656300000000000000000060448201526064016200060d565b60608062002f9162002e0c62000fdd60405180604001604052806006815260200165113a34b1b59160d11b815250866200152a90919063ffffffff16565b915062002f9e8262001408565b9050915091565b60606200311d565b60008060048301905083811115835160005b600481146200300e57603082821a0383667e0000007e03ff821c1662002fe95762002fe96200180f565b6030811160051b6007601083110201900360049590951b949094019360010162002fbf565b5050509250929050565b60008062003027848462002fad565b9150915061dbff821161d80083101762003073578051615c758160f01c148502945062003058856002840162002fad565b92509050806103ff16836103ff16600a1b0162010000019250505b9250929050565b6000607f83116200309357828253506001810162001402565b82601f538260061c601e536107ff8311620030c457600051611f3f1661c0801760f01b825260028201905062001402565b82600c1c601d5361ffff8311620030f357600051620f3f3f1662e080801760e81b825260038201905062001402565b8260121c601c535060005163073f3f3f1663f08080801760e01b81526211000090911060021b0190565b8151808301601f01805160001a600285015161ff0016176122221460018311166200314c576200314c6200180f565b6020604051019150602184015b8181146200323957805160001a600182019150605c81146200319257602281146200318e578084536001840193505062003159565b8291505b508181146200322f57805160001a6001918201916b100000000000800400000000821c1615620031cc578084536001840193505062003159565b6075811415620031fb57620031e2838362003018565b92509050620031f281856200307a565b93505062003159565b72080000000c000000000000000a0000000d00096054199091011a80156200322d578084536001840193505062003159565b505b620032396200180f565b505060008152604051915060208201810382526020810160405250919050565b60008060006110006001600160a01b031685856040516024016200327f92919062003ff2565b60408051601f198184030181529181526020820180516001600160e01b0316633088771f60e11b17905251620032b6919062003bce565b600060405180830381855afa9150503d8060008114620032f3576040519150601f19603f3d011682016040523d82523d6000602084013e620032f8565b606091505b509150915081620033415760405162461bcd60e51b8152602060048201526012602482015271185d1bda55da5d1a111958c819985a5b195960721b60448201526064016200060d565b8080602001905181019062003357919062003ca1565b95945050505050565b80516000907f1999999999999999999999999999999999999999999999999999999999999999825b600181019050603060ff82870151160382851185600a028281019650600983118188108317171586029550505050828110620033c457620033ca565b62003388565b50508062000a515763101827966000526004601cfd5b6040518060c001604052806060815260200160006001600160a01b03168152602001600081526020016000815260200160008152602001600081525090565b612299806200400883390190565b8280546200343b9062003b63565b90600052602060002090601f0160209004810192826200345f5760008555620034aa565b82601f106200347a57805160ff1916838001178555620034aa565b82800160010185558215620034aa579182015b82811115620034aa5782518255916020019190600101906200348d565b50620034b8929150620034bc565b5090565b5b80821115620034b85760008155600101620034bd565b634e487b7160e01b600052604160045260246000fd5b6040516101a081016001600160401b03811182821017156200350f576200350f620034d3565b60405290565b604051601f8201601f191681016001600160401b0381118282101715620035405762003540620034d3565b604052919050565b60006001600160401b03821115620035645762003564620034d3565b50601f01601f191660200190565b600082601f8301126200358457600080fd5b81356200359b620035958262003548565b62003515565b818152846020838601011115620035b157600080fd5b816020850160208301376000918101602001919091529392505050565b600060208284031215620035e157600080fd5b81356001600160401b03811115620035f857600080fd5b620020998482850162003572565b60005b838110156200362357818101518382015260200162003609565b83811115620018015750506000910152565b600081518084526200364f81602086016020860162003606565b601f01601f19169290920160200192915050565b60006020808301818452808551808352604092508286019150828160051b87010184880160005b83811015620036e457603f19898403018552815160808151818652620036b38287018262003635565b838b0151878c0152898401518a8801526060938401519390960192909252505093860193908601906001016200368a565b509098975050505050505050565b600080604083850312156200370657600080fd5b82356001600160401b03808211156200371e57600080fd5b6200372c8683870162003572565b935060208501359150808211156200374357600080fd5b50620037528582860162003572565b9150509250929050565b6000602082840312156200376f57600080fd5b5035919050565b60208152600062001523602083018462003635565b6000815160c08452620037a260c085018262003635565b6020848101516001600160a01b03169086015260408085015190860152606080850151908601526080808501519086015260a093840151949093019390935250919050565b6020815260006200152360208301846200378b565b6000602080830181845280855180835260408601915060408160051b870101925083870160005b828110156200385557603f19888603018452620038428583516200378b565b9450928501929085019060010162003823565b5092979650505050505050565b8035600781900b8114620020d257600080fd5b80151581146200388457600080fd5b50565b8035620020d28162003875565b803563ffffffff81168114620020d257600080fd5b80356001600160401b0381168114620020d257600080fd5b60008060408385031215620038d557600080fd5b82356001600160401b0380821115620038ed57600080fd5b908401906101a082870312156200390357600080fd5b6200390d620034e9565b8235828111156200391d57600080fd5b6200392b8882860162003572565b8252506200393c6020840162003862565b60208201526200394f6040840162003887565b60408201526060830135828111156200396757600080fd5b620039758882860162003572565b6060830152506080830135828111156200398e57600080fd5b6200399c8882860162003572565b60808301525060a083013582811115620039b557600080fd5b620039c38882860162003572565b60a08301525060c083013582811115620039dc57600080fd5b620039ea8882860162003572565b60c08301525060e08301358281111562003a0357600080fd5b62003a118882860162003572565b60e083015250610100808401358381111562003a2c57600080fd5b62003a3a8982870162003572565b828401525050610120808401358381111562003a5557600080fd5b62003a638982870162003572565b828401525050610140808401358381111562003a7e57600080fd5b62003a8c8982870162003572565b82840152505061016062003aa281850162003894565b9082015261018062003ab6848201620038a9565b90820152935060208501359150808211156200374357600080fd5b6000806040838503121562003ae557600080fd5b50508035926020909101359150565b6000602080830181845280855180835260408601915060408160051b870101925083870160005b828110156200385557603f1988860301845262003b3a85835162003635565b9450928501929085019060010162003b1b565b634e487b7160e01b600052603260045260246000fd5b600181811c9082168062003b7857607f821691505b6020821081141562000a5157634e487b7160e01b600052602260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b600060001982141562003bc75762003bc762003b9a565b5060010190565b6000825162003be281846020870162003606565b9190910192915050565b6000806040838503121562003c0057600080fd5b505080516020909101519092909150565b60008282101562003c265762003c2662003b9a565b500390565b60006020828403121562003c3e57600080fd5b81516001600160401b0381111562003c5557600080fd5b8201601f8101841362003c6757600080fd5b805162003c78620035958262003548565b81815285602083850101111562003c8e57600080fd5b6200335782602083016020860162003606565b60006020828403121562003cb457600080fd5b5051919050565b6000821982111562003cd15762003cd162003b9a565b500190565b60006101a0825181855262003cee8286018262003635565b915050602083015162003d06602086018260070b9052565b50604083015162003d1b604086018215159052565b506060830151848203606086015262003d35828262003635565b9150506080830151848203608086015262003d51828262003635565b91505060a083015184820360a086015262003d6d828262003635565b91505060c083015184820360c086015262003d89828262003635565b91505060e083015184820360e086015262003da5828262003635565b915050610100808401518583038287015262003dc2838262003635565b92505050610120808401518583038287015262003de0838262003635565b92505050610140808401518583038287015262003dfe838262003635565b925050506101608084015162003e1b8287018263ffffffff169052565b5050610180928301516001600160401b03169390920192909252919050565b60a08152600062003e4f60a083018862003cd6565b828103602084015262003e63818862003635565b60408401969096525050606081019290925260809091015292915050565b60408152600062003e96604083018562003cd6565b90508260208301529392505050565b60006020828403121562003eb857600080fd5b8151620015238162003875565b600181815b8085111562003f0657816000190482111562003eea5762003eea62003b9a565b8085161562003ef857918102915b93841c939080029062003eca565b509250929050565b60008262003f1f5750600162001402565b8162003f2e5750600062001402565b816001811462003f47576002811462003f525762003f72565b600191505062001402565b60ff84111562003f665762003f6662003b9a565b50506001821b62001402565b5060208310610133831016604e8410600b841016171562003f97575081810a62001402565b62003fa3838362003ec5565b806000190482111562003fba5762003fba62003b9a565b029392505050565b600062001523838362003f0e565b600081600019048311821515161562003fed5762003fed62003b9a565b500290565b60408152600062003e9660408301856200363556fe60e06040523480156200001157600080fd5b50604051620022993803806200229983398101604081905262000034916200043c565b60048451146200007c5760405162461bcd60e51b815260206004820152600f60248201526e1d1a58dac81a5cc8125b9d985b1a59608a1b604482015260640160405180910390fd5b8351620000919060049060208701906200023a565b50608083905260a082905260c0819052600580546001600160a01b0319163317905560408051610200810190915260066101c08201908152656465706c6f7960d01b6101e08301528152600480547f03f59c701b7eabc2a844931300da557fe352dd950116c342c8d0081f76318bc192916020830191620001129062000681565b80601f0160208091040260200160405190810160405280929190818152602001828054620001409062000681565b8015620001915780601f10620001655761010080835404028352916020019162000191565b820191906000526020600020905b8154815290600101906020018083116200017357829003601f168201915b5050505050815260200187600001518152602001876020015160070b815260200187610100015181526020018761012001518152602001608051815260200160c051815260200160a051815260200160008152602001876080015181526020018760a0015181526020016040518060200160405280600081525081526020018760600151815250604051620002279190620006ec565b60405180910390a1505050505062000859565b828054620002489062000681565b90600052602060002090601f0160209004810192826200026c5760008555620002b7565b82601f106200028757805160ff1916838001178555620002b7565b82800160010185558215620002b7579182015b82811115620002b75782518255916020019190600101906200029a565b50620002c5929150620002c9565b5090565b5b80821115620002c55760008155600101620002ca565b634e487b7160e01b600052604160045260246000fd5b6040516101a081016001600160401b03811182821017156200031c576200031c620002e0565b60405290565b60005b838110156200033f57818101518382015260200162000325565b838111156200034f576000848401525b50505050565b600082601f8301126200036757600080fd5b81516001600160401b0380821115620003845762000384620002e0565b604051601f8301601f19908116603f01168101908282118183101715620003af57620003af620002e0565b81604052838152866020858801011115620003c957600080fd5b620003dc84602083016020890162000322565b9695505050505050565b8051600781900b8114620003f957600080fd5b919050565b80518015158114620003f957600080fd5b805163ffffffff81168114620003f957600080fd5b80516001600160401b0381168114620003f957600080fd5b600080600080600060a086880312156200045557600080fd5b85516001600160401b03808211156200046d57600080fd5b908701906101a0828a0312156200048357600080fd5b6200048d620002f6565b8251828111156200049d57600080fd5b620004ab8b82860162000355565b825250620004bc60208401620003e6565b6020820152620004cf60408401620003fe565b6040820152606083015182811115620004e757600080fd5b620004f58b82860162000355565b6060830152506080830151828111156200050e57600080fd5b6200051c8b82860162000355565b60808301525060a0830151828111156200053557600080fd5b620005438b82860162000355565b60a08301525060c0830151828111156200055c57600080fd5b6200056a8b82860162000355565b60c08301525060e0830151828111156200058357600080fd5b620005918b82860162000355565b60e0830152506101008084015183811115620005ac57600080fd5b620005ba8c82870162000355565b8284015250506101208084015183811115620005d557600080fd5b620005e38c82870162000355565b8284015250506101408084015183811115620005fe57600080fd5b6200060c8c82870162000355565b828401525050610160620006228185016200040f565b908201526101806200063684820162000424565b9082015260208901519097509150808211156200065257600080fd5b50620006618882890162000355565b60408801516060890151608090990151979a919950979695509350505050565b600181811c908216806200069657607f821691505b60208210811415620006b857634e487b7160e01b600052602260045260246000fd5b50919050565b60008151808452620006d881602086016020860162000322565b601f01601f19169290920160200192915050565b60208152600082516101c08060208501526200070d6101e0850183620006be565b91506020850151601f19808685030160408701526200072d8483620006be565b935060408701519150808685030160608701526200074c8483620006be565b93506060870151915062000765608087018360070b9052565b60808701519150808685030160a0870152620007828483620006be565b935060a08701519150808685030160c0870152620007a18483620006be565b935060c087015160e087015260e08701519150610100828188015280880151925050610120828188015280880151925050610140828188015280880151925050610160818786030181880152620007f98584620006be565b9450808801519250506101808187860301818801526200081a8584620006be565b9450808801519250506101a08187860301818801526200083b8584620006be565b908801518782039092018488015293509050620003dc8382620006be565b60805160a05160c0516119bd620008dc600039600081816101140152818161035b0152818161065a01528181610ce30152611082015260008181609d0152818161068001528181610d0901526110a8015260008181610159015281816102ea015281816104270152818161063401528181610cbd015261105c01526119bd6000f3fe608060405234801561001057600080fd5b50600436106100935760003560e01c80637e66f15f116100665780637e66f15f14610136578063cb953c501461013f578063d5abeb0114610154578063eb88f52c1461017b578063f84741211461019d57600080fd5b8063313ce5671461009857806335ee5f87146100d25780633eaf5d9f146100fa578063728c97ba1461010f575b600080fd5b6100bf7f000000000000000000000000000000000000000000000000000000000000000081565b6040519081526020015b60405180910390f35b6100e56100e0366004611304565b6101c0565b604080519283526020830191909152016100c9565b61010261020a565b6040516100c9919061139d565b6100bf7f000000000000000000000000000000000000000000000000000000000000000081565b6100bf60035481565b61015261014d366004611403565b610298565b005b6100bf7f000000000000000000000000000000000000000000000000000000000000000081565b61018e610189366004611304565b6106e7565b6040516100c9939291906115eb565b6101b06101ab366004611403565b6107dd565b60405190151581526020016100c9565b6000806000836040516101d39190611616565b9081526020016040518091039020546001846040516101f29190611616565b90815260200160405180910390205491509150915091565b6004805461021790611632565b80601f016020809104026020016040519081016040528092919081815260200182805461024390611632565b80156102905780601f1061026557610100808354040283529160200191610290565b820191906000526020600020905b81548152906001019060200180831161027357829003601f168201915b505050505081565b6005546001600160a01b031633146102e85760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08195b9d1c9e541bda5b9d60921b60448201526064015b60405180910390fd5b7f0000000000000000000000000000000000000000000000000000000000000000600354106103595760405162461bcd60e51b815260206004820152601f60248201527f6d696e743a20746f74616c537570706c79206973206e6f7420656e6f7567680060448201526064016102df565b7f00000000000000000000000000000000000000000000000000000000000000008111156103c95760405162461bcd60e51b815260206004820152601760248201527f6d696e743a20416d6f756e744578636565644c696d697400000000000000000060448201526064016102df565b60008260a00151511161041e5760405162461bcd60e51b815260206004820152601760248201527f6d696e743a20726563656976657220697320656d70747900000000000000000060448201526064016102df565b606060006003547f00000000000000000000000000000000000000000000000000000000000000006104509190611683565b905082811161045f5780610461565b825b9050828110156104a057610474836108a7565b61047d826108a7565b60405160200161048e92919061169a565b60405160208183030381529060405291505b8060008560a001516040516104b59190611616565b908152602001604051809103902060008282546104d2919061171e565b925050819055508060018560a001516040516104ee9190611616565b9081526020016040518091039020600082825461050b919061171e565b925050819055508060036000828254610524919061171e565b909155505060408051610200810190915260046101c08201818152631b5a5b9d60e21b6101e0840152825280547f03f59c701b7eabc2a844931300da557fe352dd950116c342c8d0081f76318bc19291602083019161058290611632565b80601f01602080910402602001604051908101604052809291908181526020018280546105ae90611632565b80156105fb5780601f106105d0576101008083540402835291602001916105fb565b820191906000526020600020905b8154815290600101906020018083116105de57829003601f168201915b5050505050815260200186600001518152602001866020015160070b8152602001866101000151815260200186610120015181526020017f000000000000000000000000000000000000000000000000000000000000000081526020017f000000000000000000000000000000000000000000000000000000000000000081526020017f00000000000000000000000000000000000000000000000000000000000000008152602001858152602001866080015181526020018660a00151815260200184815260200186606001518152506040516106d99190611736565b60405180910390a150505050565b600060606000806002856040516106fe9190611616565b90815260200160405180910390206040518060600160405290816000820154815260200160018201805461073190611632565b80601f016020809104026020016040519081016040528092919081815260200182805461075d90611632565b80156107aa5780601f1061077f576101008083540402835291602001916107aa565b820191906000526020600020905b81548152906001019060200180831161078d57829003601f168201915b50505091835250506002919091015460ff1615156020918201528151908201516040909201519097919650945092505050565b6005546000906001600160a01b0316331461082b5760405162461bcd60e51b815260206004820152600e60248201526d1b9bdd08195b9d1c9e541bda5b9d60921b60448201526064016102df565b82515161087a5760405162461bcd60e51b815260206004820181905260248201527f7472616e736665723a20696e736372697074696f6e496420697320656d70747960448201526064016102df565b8260400151156108945761088d836108f5565b90506108a1565b61089e8383610d72565b90505b92915050565b60606080604051019050602081016040526000815280600019835b928101926030600a8206018453600a9004806108dd576108e2565b6108c2565b5050819003601f19909101908152919050565b6000808260800151511161094b5760405162461bcd60e51b815260206004820152601960248201527f7472616e736665723a2073656e64657220697320656d7074790000000000000060448201526064016102df565b6000600283600001516040516109619190611616565b908152604051908190036020019020600281015490915060ff166109c75760405162461bcd60e51b815260206004820152601f60248201527f7472616e736665723a20496e736372697074696f6e496420697320757365640060448201526064016102df565b82608001516040516020016109dc919061139d565b6040516020818303038152906040528051906020012081600101604051602001610a06919061189a565b6040516020818303038152906040528051906020012014610a695760405162461bcd60e51b815260206004820152601d60248201527f7472616e736665723a2073656e646572206973206e6f74206f776e657200000060448201526064016102df565b60a0830151805160609190610a9b57846080015190506040518060800160405280604581526020016119436045913991505b82546040518190600090610ab0908590611616565b90815260200160405180910390206000828254610acd919061171e565b9250508190555080600183604051610ae59190611616565b90815260200160405180910390206000828254610b02919061171e565b925050819055508060008760800151604051610b1e9190611616565b90815260200160405180910390206000828254610b3b9190611683565b90915550506002808501805460ff191690558651604051869291610b5e91611616565b908152604051908190036020019020815481556001808301805491830191610b8590611632565b610b90929190611123565b506002918201549101805460ff191660ff909216151591909117905560408051610200810190915260086101c08201908152673a3930b739b332b960c11b6101e08301528152600480547f03f59c701b7eabc2a844931300da557fe352dd950116c342c8d0081f76318bc192916020830191610c0b90611632565b80601f0160208091040260200160405190810160405280929190818152602001828054610c3790611632565b8015610c845780601f10610c5957610100808354040283529160200191610c84565b820191906000526020600020905b815481529060010190602001808311610c6757829003601f168201915b5050505050815260200188600001518152602001886020015160070b8152602001886101000151815260200188610120015181526020017f000000000000000000000000000000000000000000000000000000000000000081526020017f000000000000000000000000000000000000000000000000000000000000000081526020017f00000000000000000000000000000000000000000000000000000000000000008152602001838152602001886080015181526020018481526020018581526020018860600151815250604051610d5e9190611736565b60405180910390a150600195945050505050565b6000808360a001515111610dc85760405162461bcd60e51b815260206004820152601b60248201527f7472616e736665723a20726563656976657220697320656d707479000000000060448201526064016102df565b6000610dd784600001516106e7565b509150508051600014610e2c5760405162461bcd60e51b815260206004820181905260248201527f7472616e736665723a20696e736372697074696f6e496420697320657869737460448201526064016102df565b6000610e3b8560a001516101c0565b91505083811015610e8e5760405162461bcd60e51b815260206004820152601d60248201527f7472616e736665723a20496e73756666696369656e7442616c616e636500000060448201526064016102df565b8360018660a00151604051610ea39190611616565b90815260200160405180910390206000828254610ec09190611683565b90915550506040805160608101825285815260a08701516020820152600181830152865191519091600291610ef59190611616565b9081526020016040518091039020600082015181600001556020820151816001019080519060200190610f299291906111ae565b50604091820151600291909101805460ff19169115159190911790558051610200810190915260106101c082019081526f34b739b1b934b132aa3930b739b332b960811b6101e08301528152600480547f03f59c701b7eabc2a844931300da557fe352dd950116c342c8d0081f76318bc192916020830191610faa90611632565b80601f0160208091040260200160405190810160405280929190818152602001828054610fd690611632565b80156110235780601f10610ff857610100808354040283529160200191611023565b820191906000526020600020905b81548152906001019060200180831161100657829003601f168201915b5050505050815260200187600001518152602001876020015160070b8152602001876101000151815260200187610120015181526020017f000000000000000000000000000000000000000000000000000000000000000081526020017f000000000000000000000000000000000000000000000000000000000000000081526020017f00000000000000000000000000000000000000000000000000000000000000008152602001868152602001876080015181526020018760a00151815260200160405180602001604052806000815250815260200187606001518152506040516111109190611736565b60405180910390a1506001949350505050565b82805461112f90611632565b90600052602060002090601f016020900481019282611151576000855561119e565b82601f10611162578054855561119e565b8280016001018555821561119e57600052602060002091601f016020900482015b8281111561119e578254825591600101919060010190611183565b506111aa929150611222565b5090565b8280546111ba90611632565b90600052602060002090601f0160209004810192826111dc576000855561119e565b82601f106111f557805160ff191683800117855561119e565b8280016001018555821561119e579182015b8281111561119e578251825591602001919060010190611207565b5b808211156111aa5760008155600101611223565b634e487b7160e01b600052604160045260246000fd5b6040516101a0810167ffffffffffffffff8111828210171561127157611271611237565b60405290565b600082601f83011261128857600080fd5b813567ffffffffffffffff808211156112a3576112a3611237565b604051601f8301601f19908116603f011681019082821181831017156112cb576112cb611237565b816040528381528660208588010111156112e457600080fd5b836020870160208301376000602085830101528094505050505092915050565b60006020828403121561131657600080fd5b813567ffffffffffffffff81111561132d57600080fd5b61133984828501611277565b949350505050565b60005b8381101561135c578181015183820152602001611344565b8381111561136b576000848401525b50505050565b60008151808452611389816020860160208601611341565b601f01601f19169290920160200192915050565b60208152600061089e6020830184611371565b8035600781900b81146113c257600080fd5b919050565b803580151581146113c257600080fd5b803563ffffffff811681146113c257600080fd5b803567ffffffffffffffff811681146113c257600080fd5b6000806040838503121561141657600080fd5b823567ffffffffffffffff8082111561142e57600080fd5b908401906101a0828703121561144357600080fd5b61144b61124d565b82358281111561145a57600080fd5b61146688828601611277565b825250611475602084016113b0565b6020820152611486604084016113c7565b604082015260608301358281111561149d57600080fd5b6114a988828601611277565b6060830152506080830135828111156114c157600080fd5b6114cd88828601611277565b60808301525060a0830135828111156114e557600080fd5b6114f188828601611277565b60a08301525060c08301358281111561150957600080fd5b61151588828601611277565b60c08301525060e08301358281111561152d57600080fd5b61153988828601611277565b60e083015250610100808401358381111561155357600080fd5b61155f89828701611277565b828401525050610120808401358381111561157957600080fd5b61158589828701611277565b828401525050610140808401358381111561159f57600080fd5b6115ab89828701611277565b82840152505061016091506115c18284016113d7565b8282015261018091506115d58284016113eb565b9181019190915295602094909401359450505050565b8381526060602082015260006116046060830185611371565b90508215156040830152949350505050565b60008251611628818460208701611341565b9190910192915050565b600181811c9082168061164657607f821691505b6020821081141561166757634e487b7160e01b600052602260045260246000fd5b50919050565b634e487b7160e01b600052601160045260246000fd5b6000828210156116955761169561166d565b500390565b7f616d7420686173206265656e20637574206f666620746f20666974207468652081526f039bab838363c909037b934b3b4b71d160851b6020820152600083516116eb816030850160208801611341565b66016103737bb9d160cd1b6030918401918201528351611712816037840160208801611341565b01603701949350505050565b600082198211156117315761173161166d565b500190565b60208152600082516101c08060208501526117556101e0850183611371565b91506020850151601f19808685030160408701526117738483611371565b935060408701519150808685030160608701526117908483611371565b9350606087015191506117a8608087018360070b9052565b60808701519150808685030160a08701526117c38483611371565b935060a08701519150808685030160c08701526117e08483611371565b935060c087015160e087015260e087015191506101008281880152808801519250506101208281880152808801519250506101408281880152808801519250506101608187860301818801526118368584611371565b9450808801519250506101808187860301818801526118558584611371565b9450808801519250506101a08187860301818801526118748584611371565b9088015187820390920184880152935090506118908382611371565b9695505050505050565b600060208083526000845481600182811c9150808316806118bc57607f831692505b8583108114156118da57634e487b7160e01b85526022600452602485fd5b8786018381526020018180156118f7576001811461190857611933565b60ff19861682528782019650611933565b60008b81526020902060005b8681101561192d57815484820152908501908901611914565b83019750505b5094999850505050505050505056fe726564697265637420726563656976657220746f2073656e6465722c20726561736f6e3a207472616e7366657220696e736372697074696f6e20746f20636f696e62617365a26469706673582212200ca2e6db1d5e617b094d93343a1cf1da367d8509dd828a066dd0c4d3a363563464736f6c63430008090033a2646970667358221220f0abdcad6f3c1fc89aacda46e94b4d7f95a97169f69092d794b65b7df0d171b164736f6c63430008090033\",\"name\":\"brc-20\",\"op\":\"create\",\"p\":\"brczero\",\"waitinit\":true}" \
  --inscription_context "{\"inscription_id\":\"46d116b777590ef08dc94f8b54d91ac9fa6e28bc3f06f574f8f2e75dc0d1db32i0\",\"inscription_number\":0,\"is_transfer\":false,\"txid\":\"46d116b777590ef08dc94f8b54d91ac9fa6e28bc3f06f574f8f2e75dc0d1db32\",\"sender\":\"bcrt1qd28jewrz9y9hpl328em5fpljvgarucgcxf7fjt\",\"receiver\":\"bcrt1qd28jewrz9y9hpl328em5fpljvgarucgcxf7fjt\",\"commit_input\":\"\",\"reveal_output\":\"\",\"old_sat_point\":\"9fdc76fe873b11566dff1adabe4b6fd92be3cd832445b8b2b1b7e4e452c23eeb:0:0\",\"new_sat_point\":\"46d116b777590ef08dc94f8b54d91ac9fa6e28bc3f06f574f8f2e75dc0d1db32:0:0\",\"block_hash\":\"071844699637412cca4d38175eaf5420d27b454116efea1c3d20a36548befd5e\",\"block_time\":1700669916,\"block_height\":0}" \
  --home $HOME_SERVER \
  --chain-id $CHAINID
# Collect genesis tx
brczerod collect-gentxs --home $HOME_SERVER

# Run this to ensure everything worked and that the genesis file is setup correctly
brczerod validate-genesis --home $HOME_SERVER
brczerocli config keyring-backend test

run

sleep 4

